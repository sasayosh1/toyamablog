# âš ï¸ DISABLED: Gemini API usage suspended to reduce costs
# Disabled on: 2025-10-27
# Reason: High Google Cloud costs (Â¥519/month)
# To re-enable: Remove this file and rename back to youtube-check.yml
#
# Alternative: Manually create articles from YouTube videos when needed

name: YouTube Channel Check and Article Creation (DISABLED)

on:
  # schedule:
  #   # æ¯é€±åœŸæ›œæ—¥21:00 JST (åœŸæ›œæ—¥12:00 UTC)
  #   - cron: '0 12 * * 6'
  workflow_dispatch: # æ‰‹å‹•å®Ÿè¡Œã®ã¿å¯èƒ½ï¼ˆã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å®Ÿè¡Œã¯ç„¡åŠ¹ï¼‰

jobs:
  check-youtube-and-create-articles:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
      
    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        cache: 'npm'
        
    - name: Install dependencies
      run: npm ci
      
    - name: Check YouTube channel for new videos
      env:
        YOUTUBE_API_KEY: ${{ secrets.YOUTUBE_API_KEY }}
        SANITY_API_TOKEN: ${{ secrets.SANITY_API_TOKEN }}
        GOOGLE_MAPS_API_KEY: ${{ secrets.GOOGLE_MAPS_API_KEY }}
      run: node scripts/check-youtube-and-create-articles.cjs
      
    - name: Commit and push new articles
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      run: |
        git config --local user.email "action@github.com"
        git config --local user.name "GitHub Action"
        
        if [[ -n $(git status --porcelain) ]]; then
          git add .
          git commit -m "ğŸ¤– Auto-generated blog articles from new YouTube videos

          - Checked YouTube channel for updates
          - Created new blog articles with videos and maps
          - Updated content based on latest uploads
          
          ğŸ¤– Generated with [Claude Code](https://claude.ai/code)
          
          Co-Authored-By: Claude <noreply@anthropic.com>"
          git push
        else
          echo "No new videos found, no changes to commit"
        fi