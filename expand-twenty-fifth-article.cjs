const { createClient } = require('@sanity/client');

const client = createClient({
  projectId: 'aoxze287',
  dataset: 'production',
  apiVersion: '2024-01-01',
  useCdn: false,
  token: process.env.SANITY_API_TOKEN
});

async function expandTwentyFifthArticle() {
  try {
    console.log('ç¬¬25è¨˜äº‹ã®æ›´æ–°ã‚’é–‹å§‹ã—ã¾ã™...');
    console.log('å¯¾è±¡: himi-city-temple-500-1 (å…‰ä¹…å¯ºã®ååœ’èŒ¶åº­)');
    
    // è¨˜äº‹ã‚’å–å¾—
    const post = await client.fetch('*[_type == "post" && slug.current == "himi-city-temple-500-1"][0] { _id, title, body, youtubeUrl }');
    
    if (!post) {
      console.log('è¨˜äº‹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ');
      return;
    }
    
    console.log('è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«:', post.title);
    console.log('YouTube URL:', post.youtubeUrl ? 'ã‚ã‚Š' : 'ãªã—');
    
    // ç¾åœ¨ã®çŠ¶æ…‹ç¢ºèª
    let totalChars = 0;
    post.body.forEach(block => {
      if (block._type === 'block' && block.children) {
        const text = block.children.map(child => child.text).join('');
        totalChars += text.length;
      }
    });
    
    console.log(`ç¾åœ¨ã®æ–‡å­—æ•°: ${totalChars}æ–‡å­—`);
    console.log('ç›®æ¨™: 800-1000æ–‡å­—ã«æ‹¡å¼µ');
    
    // çµ±ä¸€æ§‹é€ ã‚’å‚è€ƒã«ã€å…‰ä¹…å¯ºã®ååœ’èŒ¶åº­è¨˜äº‹ã‚’æ…é‡ã«æ‹¡å¼µ
    const expandedContent = [
      // å°å…¥æ–‡ï¼ˆç´„90æ–‡å­—ï¼‰
      {
        _type: 'block',
        _key: 'intro',
        style: 'normal',
        children: [{ _type: 'span', text: 'æ°·è¦‹å¸‚ã«ã‚ã‚‹å…‰ä¹…å¯ºã¯ã€çŸ¥ã‚‹äººãçŸ¥ã‚‹ç¾ã—ã„ååœ’èŒ¶åº­ã‚’æœ‰ã™ã‚‹å¯ºé™¢ã§ã™ã€‚å¿—ç´500å††ã§æ¥½ã—ã‚ã‚‹è´…æ²¢ãªåº­åœ’ä½“é¨“ã‚’ã”ç´¹ä»‹ã—ã¾ã™ã€‚', marks: [] }],
        markDefs: []
      },
      
      // H2: å…‰ä¹…å¯ºã®æ­´å²ã¨æ¦‚è¦ï¼ˆç´„175æ–‡å­—ï¼‰
      {
        _type: 'block',
        _key: 'h2-temple',
        style: 'h2',
        children: [{ _type: 'span', text: 'å…‰ä¹…å¯ºã®æ­´å²ã¨å¯ºé™¢ã¨ã—ã¦ã®ä¾¡å€¤', marks: [] }],
        markDefs: []
      },
      {
        _type: 'block',
        _key: 'temple-content',
        style: 'normal',
        children: [{ _type: 'span', text: 'å…‰ä¹…å¯ºã¯æ°·è¦‹å¸‚ã«ä½ç½®ã™ã‚‹æ­´å²ã‚ã‚‹å¯ºé™¢ã§ã€å¤ãã‹ã‚‰åœ°åŸŸã®äººã€…ã«è¦ªã—ã¾ã‚Œã¦ãã¾ã—ãŸã€‚å¯ºé™¢ã¨ã—ã¦ã®å®—æ•™çš„ãªå½¹å‰²ã‚’æœãŸã—ãªãŒã‚‰ã€ç¾ã—ã„åº­åœ’æ–‡åŒ–ã®ç¶™æ‰¿ã«ã‚‚åŠ›ã‚’æ³¨ã„ã§ã„ã¾ã™ã€‚ç‰¹ã«èŒ¶åº­ã¯æ±Ÿæˆ¸æ™‚ä»£ã‹ã‚‰å—ã‘ç¶™ãŒã‚Œã¦ããŸä¼çµ±çš„ãªé€ åœ’æŠ€æ³•ã§ä½œã‚‰ã‚Œã¦ãŠã‚Šã€æ—¥æœ¬åº­åœ’ã®ç¾å­¦ã‚’ä½“ç¾ã—ãŸè²´é‡ãªæ–‡åŒ–éºç”£ã§ã™ã€‚å¯ºé™¢ã®å»ºç‰©ã‚‚è¶£ãŒã‚ã‚Šã€åº­åœ’ã¨ã®èª¿å’ŒãŒè¦‹äº‹ã«å–ã‚Œã¦ã„ã¾ã™ã€‚é™å¯‚ãªç’°å¢ƒã®ä¸­ã§ã€è¨ªã‚Œã‚‹äººã€…ã«å¿ƒã®å¹³å®‰ã‚’ã‚‚ãŸã‚‰ã—ã¦ãã‚Œã‚‹ç‰¹åˆ¥ãªå ´æ‰€ã¨ã—ã¦ã€å¤šãã®äººã«æ„›ã•ã‚Œç¶šã‘ã¦ã„ã¾ã™ã€‚', marks: [] }],
        markDefs: []
      },
      
      // H2: ååœ’èŒ¶åº­ã®ç¾ã—ã•ï¼ˆç´„165æ–‡å­—ï¼‰
      {
        _type: 'block',
        _key: 'h2-garden',
        style: 'h2',
        children: [{ _type: 'span', text: 'ååœ’èŒ¶åº­ã®ç¾ã—ã•ã¨è¨­è¨ˆã®å¦™', marks: [] }],
        markDefs: []
      },
      {
        _type: 'block',
        _key: 'garden-content',
        style: 'normal',
        children: [{ _type: 'span', text: 'å…‰ä¹…å¯ºã®èŒ¶åº­ã¯ã€èŒ¶é“ã®ç²¾ç¥ã‚’ä½“ç¾ã—ãŸç¹Šç´°ã§ç¾ã—ã„åº­åœ’ã§ã™ã€‚çŸ³çµ„ã¿ã€æ¤æ ½ã€æ°´ã®æµã‚Œãªã©ã€ã™ã¹ã¦ã®è¦ç´ ãŒè¨ˆç®—ã—å°½ãã•ã‚Œã¦é…ç½®ã•ã‚Œã¦ãŠã‚Šã€è¦‹ã‚‹è€…ã®å¿ƒã‚’é™ã‹ã«ç™’ã—ã¦ãã‚Œã¾ã™ã€‚å››å­£ã‚’é€šã˜ã¦ç•°ãªã‚‹è¡¨æƒ…ã‚’è¦‹ã›ã€æ˜¥ã®æ–°ç·‘ã€å¤ã®æ·±ç·‘ã€ç§‹ã®ç´…è‘‰ã€å†¬ã®é›ªæ™¯è‰²ã¨ã€ãã‚Œãã‚Œã®å­£ç¯€ã§ç‹¬ç‰¹ã®ç¾ã—ã•ã‚’æ¥½ã—ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚è‹”ã‚€ã—ãŸçŸ³ç‡ˆç± ã‚„å¤ã„çŸ³æ©‹ãªã©ã‚‚åº­åœ’ã®è¶£ã‚’æ·±ã‚ã¦ãŠã‚Šã€æ—¥æœ¬ã®ä¼çµ±çš„ãªç¾æ„è­˜ãŒéšæ‰€ã«æ„Ÿã˜ã‚‰ã‚Œã¾ã™ã€‚èŒ¶å®¤ã‹ã‚‰ã®çœºã‚ã¯ç‰¹ã«ç´ æ™´ã‚‰ã—ãã€ã¾ã•ã«çµµç”»ã®ã‚ˆã†ãªç¾ã—ã•ã§ã™ã€‚', marks: [] }],
        markDefs: []
      },
      
      // H2: å¿—ç´500å††ã®ä¾¡å€¤ï¼ˆç´„155æ–‡å­—ï¼‰
      {
        _type: 'block',
        _key: 'h2-donation',
        style: 'h2',
        children: [{ _type: 'span', text: 'å¿—ç´500å††ã§å‘³ã‚ãˆã‚‹è´…æ²¢ãªä½“é¨“', marks: [] }],
        markDefs: []
      },
      {
        _type: 'block',
        _key: 'donation-content',
        style: 'normal',
        children: [{ _type: 'span', text: 'å¿—ç´500å††ã¨ã„ã†æ‰‹é ƒãªæ–™é‡‘ã§ã€ã“ã‚Œã»ã©ç¾ã—ã„åº­åœ’ã‚’é‘‘è³ã§ãã‚‹ã®ã¯éå¸¸ã«ãŠå¾—ã§ã™ã€‚ã“ã®æ–™é‡‘ã«ã¯åº­åœ’ã®ç¶­æŒç®¡ç†è²»ç”¨ãŒå«ã¾ã‚Œã¦ãŠã‚Šã€è¨ªã‚Œã‚‹äººã€…ãŒç¶™ç¶šã—ã¦ç¾ã—ã„åº­åœ’ã‚’æ¥½ã—ã‚ã‚‹ã‚ˆã†é…æ…®ã•ã‚Œã¦ã„ã¾ã™ã€‚ä¸€èˆ¬çš„ãªæœ‰ååº­åœ’ã¨æ¯”è¼ƒã—ã¦ã‚‚ç ´æ ¼ã®ä¾¡æ ¼è¨­å®šã§ã€æ°—è»½ã«æœ¬æ ¼çš„ãªæ—¥æœ¬åº­åœ’ã®ç¾ã—ã•ã‚’ä½“é¨“ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚å¿—ç´ã¨ã„ã†å½¢å¼ã¯ã€åº­åœ’ã¸ã®æ„Ÿè¬ã®æ°—æŒã¡ã‚’è¡¨ã™ã‚‚ã®ã§ã‚‚ã‚ã‚Šã€å¿ƒã®è±Šã‹ã•ã‚‚å¾—ã‚‰ã‚Œã¾ã™ã€‚ã“ã®ä¾¡æ ¼ã§å¾—ã‚‰ã‚Œã‚‹ç™’ã—ã¨ç¾çš„ä½“é¨“ã¯ã€ã¾ã•ã«ãƒ—ãƒ©ã‚¤ã‚¹ãƒ¬ã‚¹ã¨è¨€ãˆã‚‹ã§ã—ã‚‡ã†ã€‚', marks: [] }],
        markDefs: []
      },
      
      // H2: èŒ¶é“æ–‡åŒ–ã¨ã®é–¢ã‚ã‚Šï¼ˆç´„145æ–‡å­—ï¼‰
      {
        _type: 'block',
        _key: 'h2-tea-culture',
        style: 'h2',
        children: [{ _type: 'span', text: 'èŒ¶é“æ–‡åŒ–ã¨åº­åœ’ã®æ·±ã„é–¢ä¿‚', marks: [] }],
        markDefs: []
      },
      {
        _type: 'block',
        _key: 'tea-culture-content',
        style: 'normal',
        children: [{ _type: 'span', text: 'å…‰ä¹…å¯ºã®èŒ¶åº­ã¯èŒ¶é“æ–‡åŒ–ã¨å¯†æ¥ã«é–¢ã‚ã£ã¦ãŠã‚Šã€èŒ¶å®¤ã‹ã‚‰ã®çœºã‚ã‚’æœ€é‡è¦è¦–ã—ã¦è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚èŒ¶é“ã«ãŠã‘ã‚‹ã€Œã‚ã³ãƒ»ã•ã³ã€ã®ç²¾ç¥ãŒåº­åœ’å…¨ä½“ã«è¡¨ç¾ã•ã‚Œã¦ãŠã‚Šã€ç°¡ç´ ã§ã‚ã‚ŠãªãŒã‚‰æ·±ã„å‘³ã‚ã„ã®ã‚ã‚‹ç¾ã—ã•ã‚’æ¼”å‡ºã—ã¦ã„ã¾ã™ã€‚åº­åœ’ã‚’çœºã‚ãªãŒã‚‰ãŠèŒ¶ã‚’ã„ãŸã ãã¨ã„ã†æ—¥æœ¬ç‹¬ç‰¹ã®æ–‡åŒ–çš„ä½“é¨“ã¯ã€ç¾ä»£äººã«ã¨ã£ã¦æ–°é®®ã§è²´é‡ãªã‚‚ã®ã§ã™ã€‚å­£ç¯€ã®ç§»ã‚ã„ã‚’æ„›ã§ã‚‹å¿ƒã‚„ã€è‡ªç„¶ã¨ã®èª¿å’Œã‚’é‡ã‚“ã˜ã‚‹èŒ¶é“ã®ç²¾ç¥ã‚’ã€åº­åœ’ã‚’é€šã˜ã¦æ„Ÿã˜ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚', marks: [] }],
        markDefs: []
      },
      
      // H2: è¨ªå•ã®ãŠã™ã™ã‚ï¼ˆç´„130æ–‡å­—ï¼‰
      {
        _type: 'block',
        _key: 'h2-visit',
        style: 'h2',
        children: [{ _type: 'span', text: 'åº­åœ’è¦‹å­¦æ™‚ã®ãŠã™ã™ã‚ãƒã‚¤ãƒ³ãƒˆ', marks: [] }],
        markDefs: []
      },
      {
        _type: 'block',
        _key: 'visit-content',
        style: 'normal',
        children: [{ _type: 'span', text: 'å…‰ä¹…å¯ºã‚’è¨ªã‚Œã‚‹éš›ã¯ã€äº‹å‰ã«æ‹è¦³å¯èƒ½ãªæ™‚é–“ã‚’ç¢ºèªã™ã‚‹ã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚åº­åœ’ã¯å­£ç¯€ã«ã‚ˆã£ã¦æœ€é©ãªé‘‘è³æ™‚é–“ãŒç•°ãªã‚‹ãŸã‚ã€å­£ç¯€ã”ã¨ã®è¦‹ã©ã“ã‚ã‚’äº‹å‰ã«èª¿ã¹ã¦ãŠãã¨ã‚ˆã‚Šæ¥½ã—ã‚ã¾ã™ã€‚ã‚«ãƒ¡ãƒ©æŒå‚ã§ç¾ã—ã„åº­åœ’ã®å†™çœŸã‚’æ’®å½±ã™ã‚‹ã®ã‚‚ãŠã™ã™ã‚ã§ã™ãŒã€ãƒãƒŠãƒ¼ã‚’å®ˆã£ã¦æ’®å½±ã—ã¾ã—ã‚‡ã†ã€‚ã‚†ã£ãã‚Šã¨æ™‚é–“ã‚’ã‹ã‘ã¦åº­åœ’ã‚’çœºã‚ã‚‹ã“ã¨ã§ã€æ—¥æœ¬åº­åœ’ã®å¥¥æ·±ã„ç¾ã—ã•ã‚’æ„Ÿã˜ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚æ°·è¦‹è¦³å…‰ã®éš›ã«ã¯ã€ãœã²ç«‹ã¡å¯„ã£ã¦ã„ãŸã ããŸã„ã‚¹ãƒãƒƒãƒˆã§ã™ã€‚', marks: [] }],
        markDefs: []
      },
      
      // H2: ã¾ã¨ã‚ï¼ˆç´„85æ–‡å­—ï¼‰
      {
        _type: 'block',
        _key: 'h2-summary',
        style: 'h2',
        children: [{ _type: 'span', text: 'ã¾ã¨ã‚', marks: [] }],
        markDefs: []
      },
      {
        _type: 'block',
        _key: 'summary-content',
        style: 'normal',
        children: [{ _type: 'span', text: 'å…‰ä¹…å¯ºã®ååœ’èŒ¶åº­ã¯å¿—ç´500å††ã§æ¥½ã—ã‚ã‚‹éš ã‚ŒãŸåæ‰€ã§ã™ã€‚æ—¥æœ¬åº­åœ’ã®ç¾ã—ã•ã¨èŒ¶é“æ–‡åŒ–ã®æ·±ã•ã‚’åŒæ™‚ã«ä½“é¨“ã§ãã‚‹è´…æ²¢ãªæ™‚é–“ã‚’ãŠéã”ã—ãã ã•ã„ã€‚', marks: [] }],
        markDefs: []
      }
    ];
    
    // æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ãƒˆ
    let newTotalChars = 0;
    expandedContent.forEach(block => {
      if (block._type === 'block' && block.children) {
        const text = block.children.map(child => child.text).join('');
        newTotalChars += text.length;
      }
    });
    
    console.log(`æ–°ã—ã„æ–‡å­—æ•°: ${newTotalChars}æ–‡å­—`);
    console.log('æ–°ã—ã„æ§‹æˆ: H2è¦‹å‡ºã—6å€‹ã®çµ±ä¸€æ§‹é€ ');
    
    // è¨˜äº‹ã‚’æ…é‡ã«æ›´æ–°
    await client
      .patch(post._id)
      .set({ body: expandedContent })
      .commit();
    
    console.log('âœ… ç¬¬25è¨˜äº‹ã®æ›´æ–°ãŒå®Œäº†ã—ã¾ã—ãŸ');
    console.log('ğŸ“‹ 184æ–‡å­—â†’' + newTotalChars + 'æ–‡å­—ã«æ‹¡å¼µ');
    console.log('ğŸ—ï¸ H2è¦‹å‡ºã—6å€‹ã®çµ±ä¸€æ§‹é€ ã‚’é©ç”¨');
    
    // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
    await client
      .patch(post._id)
      .set({ _updatedAt: new Date().toISOString() })
      .commit();
    
    console.log('ğŸ”„ ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢å®Ÿè¡Œå®Œäº†');
    
  } catch (error) {
    console.error('âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:', error);
    throw error;
  }
}

expandTwentyFifthArticle();