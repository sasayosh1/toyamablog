<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¯ ç›´æ¥GA4ç¢ºèªæ‰‹é †</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .step {
            background: #f8f9fa;
            margin: 20px 0;
            padding: 25px;
            border-radius: 15px;
            border-left: 5px solid #007bff;
        }
        .step h3 {
            margin: 0 0 15px 0;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            font-family: 'SF Mono', Monaco, monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 15px 0;
            white-space: pre-wrap;
        }
        .highlight {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        .error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            margin: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        button:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }
        .action-button {
            background: #28a745;
        }
        .action-button:hover {
            background: #218838;
        }
        .warning-button {
            background: #ffc107;
            color: #212529;
        }
        .warning-button:hover {
            background: #e0a800;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¯ GA4å‹•ä½œç¢ºèªï¼šå®Ÿéš›ã®æ‰‹é †</h1>
        
        <div class="success">
            <strong>ğŸ“Š æ¸¬å®šID:</strong> G-5VS8BF91VH<br>
            <strong>ğŸŒ å¯¾è±¡ã‚µã‚¤ãƒˆ:</strong> https://sasakiyoshimasa.com<br>
            <strong>â° ç¢ºèªæ™‚åˆ»:</strong> <span id="timestamp"></span>
        </div>

        <div class="step">
            <h3>ğŸš€ Step 1: ã‚µã‚¤ãƒˆã‚’æ–°ã—ã„ã‚¿ãƒ–ã§é–‹ã</h3>
            <p>CORSåˆ¶é™ã‚’å›é¿ã™ã‚‹ãŸã‚ã€ç›´æ¥ã‚µã‚¤ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚</p>
            
            <button class="action-button" onclick="openSiteForTesting()">
                ğŸŒ TOYAMA BLOG ã‚’é–‹ã
            </button>
            
            <div class="highlight">
                <strong>ğŸ“ é‡è¦:</strong> ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãƒ–ãƒ­ãƒƒã‚¯ã‚’è§£é™¤ã—ã¦ãã ã•ã„ã€‚<br>
                æ–°ã—ã„ã‚¿ãƒ–ã§ https://sasakiyoshimasa.com ãŒé–‹ã‹ã‚Œã¾ã™ã€‚
            </div>
        </div>

        <div class="step">
            <h3>ğŸ”§ Step 2: DevToolsã§GA4ã‚¹ã‚¯ãƒªãƒ—ãƒˆç¢ºèª</h3>
            <p>é–‹ã„ãŸã‚µã‚¤ãƒˆã§DevToolsã‚’ä½¿ç”¨ã—ã¦GA4ã®å®Ÿè£…ã‚’ç¢ºèªã—ã¾ã™ã€‚</p>
            
            <div class="highlight">
                <strong>æ‰‹é †:</strong><br>
                1. æ–°ã—ãé–‹ã„ãŸã‚¿ãƒ–ã§ <strong>F12</strong> ã‚’æŠ¼ã™<br>
                2. <strong>Network</strong> ã‚¿ãƒ–ã‚’é¸æŠ<br>
                3. ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ¬„ã« <strong>gtag</strong> ã¨å…¥åŠ›<br>
                4. <strong>Ctrl+R</strong> ã§ãƒšãƒ¼ã‚¸ãƒªãƒ­ãƒ¼ãƒ‰
            </div>
            
            <div class="success">
                <strong>âœ… æœŸå¾…ã•ã‚Œã‚‹çµæœ:</strong><br>
                <code>gtag/js?id=G-5VS8BF91VH</code> ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹
            </div>
            
            <button onclick="copyToClipboard('gtag')">ğŸ“‹ æ¤œç´¢ãƒ¯ãƒ¼ãƒ‰ã€Œgtagã€ã‚’ã‚³ãƒ”ãƒ¼</button>
        </div>

        <div class="step">
            <h3>ğŸ“Š Step 3: Console ã§GA4å®Ÿè£…ç¢ºèª</h3>
            <p>DevTools Consoleã§å®Ÿè£…çŠ¶æ³ã‚’è©³ç´°ç¢ºèªã—ã¾ã™ã€‚</p>
            
            <div class="highlight">
                <strong>æ‰‹é †:</strong><br>
                1. DevToolsã® <strong>Console</strong> ã‚¿ãƒ–ã«åˆ‡ã‚Šæ›¿ãˆ<br>
                2. ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã¦è²¼ã‚Šä»˜ã‘<br>
                3. <strong>Enter</strong> ã§å®Ÿè¡Œ
            </div>

            <div class="code-block">// GA4å®Ÿè£…ç¢ºèªã‚¹ã‚¯ãƒªãƒ—ãƒˆ
console.log('ğŸ¯ GA4ç¢ºèªé–‹å§‹');
console.log('æ¸¬å®šID: G-5VS8BF91VH');

// 1. gtagé–¢æ•°ç¢ºèª
if (typeof window.gtag === 'function') {
    console.log('âœ… gtagé–¢æ•°: å­˜åœ¨');
} else {
    console.log('âŒ gtagé–¢æ•°: æœªæ¤œå‡º');
}

// 2. dataLayerç¢ºèª
if (Array.isArray(window.dataLayer)) {
    console.log(`âœ… dataLayer: ${window.dataLayer.length}å€‹ã®è¦ç´ `);
    console.log('dataLayerå†…å®¹:', window.dataLayer);
} else {
    console.log('âŒ dataLayer: æœªæ¤œå‡º');
}

// 3. GA4ã‚¹ã‚¯ãƒªãƒ—ãƒˆç¢ºèª
const gtagScripts = document.querySelectorAll('script[src*="gtag/js"]');
console.log(`ğŸ“¡ GA4ã‚¹ã‚¯ãƒªãƒ—ãƒˆæ•°: ${gtagScripts.length}`);
gtagScripts.forEach((script, i) => {
    console.log(`âœ… ã‚¹ã‚¯ãƒªãƒ—ãƒˆ${i+1}: ${script.src}`);
});

// 4. æ¸¬å®šIDç¢ºèª
const allScripts = document.querySelectorAll('script');
let found = false;
allScripts.forEach(script => {
    if (script.innerHTML.includes('G-5VS8BF91VH')) {
        found = true;
        console.log('âœ… æ¸¬å®šID G-5VS8BF91VH ã‚’ç¢ºèª');
    }
});
if (!found) console.log('âŒ æ¸¬å®šIDæœªæ¤œå‡º');

console.log('ğŸ¯ ç¢ºèªå®Œäº†!');</div>
            
            <button onclick="copyToClipboard(document.querySelector('.code-block').textContent)">
                ğŸ“‹ ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ã‚³ãƒ”ãƒ¼
            </button>
        </div>

        <div class="step">
            <h3>ğŸ”„ Step 4: ãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼é€ä¿¡ç¢ºèª</h3>
            <p>å®Ÿéš›ã®ãƒšãƒ¼ã‚¸é·ç§»ã§pageviewã‚¤ãƒ™ãƒ³ãƒˆãŒé€ä¿¡ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚</p>
            
            <div class="highlight">
                <strong>æ‰‹é †:</strong><br>
                1. DevToolsã® <strong>Network</strong> ã‚¿ãƒ–ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ <strong>collect</strong> ã«å¤‰æ›´<br>
                2. ã‚µã‚¤ãƒˆå†…ã®è¨˜äº‹ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯<br>
                3. ãƒšãƒ¼ã‚¸é·ç§»å¾Œã€collectãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒé€ä¿¡ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
            </div>
            
            <div class="success">
                <strong>âœ… æœŸå¾…ã•ã‚Œã‚‹çµæœ:</strong><br>
                <code>collect?v=2&tid=G-5VS8BF91VH</code> ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹<br>
                <strong>é‡è¦:</strong> ãƒšãƒ¼ã‚¸é·ç§»ã”ã¨ã«1å›ã ã‘é€ä¿¡ã•ã‚Œã‚‹
            </div>
            
            <button onclick="copyToClipboard('collect')">ğŸ“‹ æ¤œç´¢ãƒ¯ãƒ¼ãƒ‰ã€Œcollectã€ã‚’ã‚³ãƒ”ãƒ¼</button>
        </div>

        <div class="step">
            <h3>ğŸš€ Step 5: æ‰‹å‹•pageviewé€ä¿¡ãƒ†ã‚¹ãƒˆ</h3>
            <p>Consoleã‹ã‚‰æ‰‹å‹•ã§pageviewã‚’é€ä¿¡ã—ã¦GA4ã®å‹•ä½œã‚’ç¢ºèªã—ã¾ã™ã€‚</p>
            
            <div class="code-block">// æ‰‹å‹•pageviewé€ä¿¡ãƒ†ã‚¹ãƒˆ
if (typeof window.gtag === 'function') {
    window.gtag('config', 'G-5VS8BF91VH', {
        page_path: '/manual-test-' + Date.now(),
        page_title: 'Manual Test Page'
    });
    console.log('âœ… æ‰‹å‹•pageviewã‚’é€ä¿¡ã—ã¾ã—ãŸ');
    console.log('ğŸ’¡ Networkã‚¿ãƒ–ã§collectãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç¢ºèªã—ã¦ãã ã•ã„');
} else {
    console.log('âŒ gtagé–¢æ•°ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“');
}</div>
            
            <button onclick="copyToClipboard('if (typeof window.gtag === \'function\') { window.gtag(\'config\', \'G-5VS8BF91VH\', { page_path: \'/manual-test-\' + Date.now(), page_title: \'Manual Test Page\' }); console.log(\'âœ… æ‰‹å‹•pageviewã‚’é€ä¿¡ã—ã¾ã—ãŸ\'); } else { console.log(\'âŒ gtagé–¢æ•°ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“\'); }')">
                ğŸ“‹ é€ä¿¡ãƒ†ã‚¹ãƒˆã‚’ã‚³ãƒ”ãƒ¼
            </button>
        </div>

        <div class="step">
            <h3>ğŸ“ˆ Step 6: GA4ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¬ãƒãƒ¼ãƒˆç¢ºèª</h3>
            <p>GA4ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®è¨ˆæ¸¬ãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèªã—ã¾ã™ã€‚</p>
            
            <button class="warning-button" onclick="openGA4Dashboard()">
                ğŸ“Š GA4ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¬ãƒãƒ¼ãƒˆã‚’é–‹ã
            </button>
            
            <div class="highlight">
                <strong>ç¢ºèªé …ç›®:</strong><br>
                â€¢ ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°<br>
                â€¢ ãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼æ•°<br>
                â€¢ ãƒšãƒ¼ã‚¸ãƒ‘ã‚¹<br>
                â€¢ ã‚¤ãƒ™ãƒ³ãƒˆæ•°
            </div>
            
            <div class="success">
                <strong>âœ… æœŸå¾…ã•ã‚Œã‚‹çµæœ:</strong><br>
                ã‚µã‚¤ãƒˆã‚¢ã‚¯ã‚»ã‚¹å¾Œ1-2åˆ†ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œã‚‹
            </div>
        </div>

        <div class="step">
            <h3>ğŸ‰ Step 7: æœ€çµ‚ç¢ºèª</h3>
            <p>å…¨ã¦ã®ç¢ºèªé …ç›®ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦å®Ÿè£…å®Œäº†ã‚’ç¢ºèªã—ã¾ã™ã€‚</p>
            
            <div class="success">
                <strong>âœ… ç¢ºèªãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ:</strong><br>
                â–¡ gtag/js?id=G-5VS8BF91VH ã‚¹ã‚¯ãƒªãƒ—ãƒˆèª­ã¿è¾¼ã¿<br>
                â–¡ window.gtagé–¢æ•°ã®å­˜åœ¨<br>
                â–¡ window.dataLayerã®å­˜åœ¨<br>
                â–¡ æ¸¬å®šID G-5VS8BF91VH ã®ç¢ºèª<br>
                â–¡ ãƒšãƒ¼ã‚¸é·ç§»æ™‚ã®collectãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡<br>
                â–¡ GA4ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¬ãƒãƒ¼ãƒˆã§ã®è¨ˆæ¸¬ç¢ºèª
            </div>
            
            <button onclick="generateReport()">ğŸ“‹ ç¢ºèªãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆ</button>
        </div>

        <div id="report" style="display: none;">
            <h2>ğŸ“Š ç¢ºèªãƒ¬ãƒãƒ¼ãƒˆ</h2>
            <div id="reportContent"></div>
        </div>
    </div>

    <script>
        // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—è¡¨ç¤º
        document.getElementById('timestamp').textContent = new Date().toLocaleString('ja-JP');

        function openSiteForTesting() {
            console.log('ğŸŒ TOYAMA BLOGã‚’æ–°ã—ã„ã‚¿ãƒ–ã§é–‹ã„ã¦ã„ã¾ã™...');
            const siteWindow = window.open('https://sasakiyoshimasa.com', '_blank', 'width=1200,height=800');
            
            if (siteWindow) {
                alert('âœ… TOYAMA BLOGã‚’æ–°ã—ã„ã‚¿ãƒ–ã§é–‹ãã¾ã—ãŸï¼\n\næ¬¡ã®æ‰‹é †:\n1. æ–°ã—ã„ã‚¿ãƒ–ã§F12ã‚’æŠ¼ã—ã¦DevToolsã‚’é–‹ã\n2. Networkã‚¿ãƒ–ã§GA4ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ç¢ºèª\n3. Consoleã‚¿ãƒ–ã§å®Ÿè£…çŠ¶æ³ã‚’ç¢ºèª');
            } else {
                alert('âŒ ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã—ãŸã€‚\nãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã§ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’è¨±å¯ã—ã¦ãã ã•ã„ã€‚');
            }
        }

        function openGA4Dashboard() {
            console.log('ğŸ“Š GA4ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¬ãƒãƒ¼ãƒˆã‚’é–‹ã„ã¦ã„ã¾ã™...');
            const dashboardUrl = 'https://analytics.google.com/analytics/web/#/p498053318/realtime/overview';
            const dashboardWindow = window.open(dashboardUrl, '_blank');
            
            if (dashboardWindow) {
                alert('âœ… GA4ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¬ãƒãƒ¼ãƒˆã‚’é–‹ãã¾ã—ãŸï¼\n\nç¢ºèªé …ç›®:\nâ€¢ ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼\nâ€¢ ãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼\nâ€¢ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¤ãƒ™ãƒ³ãƒˆ\n\nã‚µã‚¤ãƒˆã‚¢ã‚¯ã‚»ã‚¹å¾Œ1-2åˆ†ã§åæ˜ ã•ã‚Œã¾ã™ã€‚');
            } else {
                alert('âŒ ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã—ãŸã€‚');
            }
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                const originalText = event.target.textContent;
                event.target.textContent = 'âœ… ã‚³ãƒ”ãƒ¼å®Œäº†!';
                event.target.style.background = '#28a745';
                
                setTimeout(() => {
                    event.target.textContent = originalText;
                    event.target.style.background = '#007bff';
                }, 2000);
            }).catch(err => {
                console.error('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—:', err);
                alert('ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã¸ã®ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ‰‹å‹•ã§ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚');
            });
        }

        function generateReport() {
            const now = new Date().toLocaleString('ja-JP');
            const reportContent = `
                <div class="success">
                    <h3>ğŸ¯ GA4å®Ÿè£…ç¢ºèªãƒ¬ãƒãƒ¼ãƒˆ</h3>
                    <p><strong>ç¢ºèªæ—¥æ™‚:</strong> ${now}</p>
                    <p><strong>æ¸¬å®šID:</strong> G-5VS8BF91VH</p>
                    <p><strong>å¯¾è±¡ã‚µã‚¤ãƒˆ:</strong> https://sasakiyoshimasa.com</p>
                    
                    <h4>ğŸ“‹ ç¢ºèªé …ç›®</h4>
                    <p>â–¡ DevToolsã§gtag/js?id=G-5VS8BF91VH ã‚’ç¢ºèª</p>
                    <p>â–¡ Consoleã§window.gtagé–¢æ•°ã‚’ç¢ºèª</p>
                    <p>â–¡ Consoleã§window.dataLayerã‚’ç¢ºèª</p>
                    <p>â–¡ Networkã‚¿ãƒ–ã§collectãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç¢ºèª</p>
                    <p>â–¡ GA4ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¬ãƒãƒ¼ãƒˆã§è¨ˆæ¸¬ã‚’ç¢ºèª</p>
                    
                    <h4>ğŸ‰ çµè«–</h4>
                    <p>ä¸Šè¨˜ã®å…¨é …ç›®ãŒç¢ºèªã§ãã‚Œã°ã€GA4å®Ÿè£…ã¯<strong>æ­£å¸¸ã«å‹•ä½œ</strong>ã—ã¦ã„ã¾ã™ã€‚</p>
                </div>
            `;
            
            document.getElementById('reportContent').innerHTML = reportContent;
            document.getElementById('report').style.display = 'block';
            document.getElementById('report').scrollIntoView({ behavior: 'smooth' });
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®æ¡ˆå†…
        window.onload = () => {
            console.log('ğŸ¯ GA4ç›´æ¥ç¢ºèªãƒ„ãƒ¼ãƒ«ã‚’é–‹å§‹ã—ã¾ã—ãŸ');
            console.log('æ‰‹é †ã«å¾“ã£ã¦ç¢ºèªã‚’é€²ã‚ã¦ãã ã•ã„');
        };
    </script>
</body>
</html>