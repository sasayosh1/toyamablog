const { createClient } = require('@sanity/client');
const client = createClient({
  projectId: 'aoxze287',
  dataset: 'production',
  apiVersion: '2024-01-01',
  useCdn: false,
  token: process.env.SANITY_API_TOKEN
});

async function completeFinalArticles() {
  try {
    console.log('ğŸ¯ æœ€çµ‚4è¨˜äº‹ã®æ‹¡å……...');
    
    const targetIds = [
      '4zxT7RlbAnSlGPWZgbltlI', // ä¸Šå¸‚å·ãƒ€ãƒ 
      'o031colbTiBAm1wuPGalht',  // Great Buddha
      'o031colbTiBAm1wuPGbW45',  // ã‚ã‹ã‚ŠãŒãƒŠã‚¤ãƒˆ
      'o031colbTiBAm1wuPGbaKb'   // åŸç«¯æ›³å±±ç¥­
    ];
    
    let successCount = 0;
    
    for (let i = 0; i < targetIds.length; i++) {
      const articleId = targetIds[i];
      
      try {
        console.log(`\nğŸ”„ [${i+1}/4] å‡¦ç†ä¸­: ${articleId}`);
        
        const article = await client.fetch(`*[_type == "post" && _id == "${articleId}"][0] { _id, title, category, body }`);
        
        if (!article) {
          console.log('   âŒ è¨˜äº‹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
          continue;
        }
        
        console.log('   ğŸ“„', article.title);
        
        // æ—¢å­˜ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ä¿æŒã—ã¤ã¤æ‹¡å……
        const enhancedBody = [...(article.body || [])];
        
        // è¨˜äº‹åˆ¥ã‚«ã‚¹ã‚¿ãƒ æ‹¡å……ã‚³ãƒ³ãƒ†ãƒ³ãƒ„
        let customSections = [];
        
        if (article.title.includes('ä¸Šå¸‚å·ãƒ€ãƒ ')) {
          customSections = [
            {
              h2: 'ä¸Šå¸‚ç”ºã®ãƒ€ãƒ ã¨è‡ªç„¶ç’°å¢ƒ',
              content: 'ä¸Šå¸‚ç”ºã«ã¯è¤‡æ•°ã®ãƒ€ãƒ ãŒå­˜åœ¨ã—ã€ãã‚Œãã‚ŒãŒåœ°åŸŸã®æ°´è³‡æºç®¡ç†ã¨è‡ªç„¶ä¿è­·ã«é‡è¦ãªå½¹å‰²ã‚’æœãŸã—ã¦ã„ã¾ã™ã€‚ä¸Šå¸‚å·ç¬¬äºŒãƒ€ãƒ ã¯ã€ä¸Šå¸‚å·æ°´ç³»ã®æ²»æ°´ã¨åˆ©æ°´ã‚’æ‹…ã†é‡è¦ãªæ–½è¨­ã¨ã—ã¦æ©Ÿèƒ½ã—ã¦ãŠã‚Šã€å‘¨è¾ºã®è‡ªç„¶ç’°å¢ƒã¨ã®èª¿å’Œã‚‚å›³ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚ãƒ€ãƒ å‘¨è¾ºã¯è±Šã‹ãªç·‘ã«å›²ã¾ã‚Œã€å››å­£æŠ˜ã€…ã®ç¾ã—ã„æ™¯è¦³ã‚’æ¥½ã—ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚'
            },
            {
              h2: 'ä¸Šå¸‚ç”ºè¦³å…‰ã§ã®ä½ç½®ã¥ã‘',
              content: 'ä¸Šå¸‚ç”ºã‚’è¨ªã‚Œã‚‹éš›ã«ã¯ã€å‰±å²³ã®ç™»å±±å£ã¨ã—ã¦ã‚‚çŸ¥ã‚‰ã‚Œã‚‹ç«‹å±±é€£å³°ã®éº“ã¨ã„ã†ç«‹åœ°ã‚’æ´»ã‹ã—ãŸè‡ªç„¶è¦³å…‰ãŒé­…åŠ›ã§ã™ã€‚ãƒ€ãƒ æ–½è¨­ã‚‚ãã®ä¸€éƒ¨ã¨ã—ã¦ã€åœ°åŸŸã®æ°´åˆ©ç”¨ã®æ­´å²ã‚„æŠ€è¡“ã‚’å­¦ã¶ã“ã¨ãŒã§ãã‚‹è²´é‡ãªã‚¹ãƒãƒƒãƒˆã¨ãªã£ã¦ã„ã¾ã™ã€‚ç«‹å±±é»’éƒ¨ã‚¢ãƒ«ãƒšãƒ³ãƒ«ãƒ¼ãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ‹ ç‚¹ã¨ã—ã¦ã‚‚é‡è¦ãªä½ç½®ã«ã‚ã‚Šã¾ã™ã€‚'
            },
            {
              h2: 'ã‚¢ã‚¯ã‚»ã‚¹ã¨å‘¨è¾ºã®è¦‹ã©ã“ã‚',
              content: 'ä¸Šå¸‚ç”ºå†…ã®ãƒ€ãƒ å·¡ã‚Šã¯ã€åœ°åŸŸã®åœ°å½¢ã‚„è‡ªç„¶ã‚’ç†è§£ã™ã‚‹è‰¯ã„æ©Ÿä¼šã¨ãªã‚Šã¾ã™ã€‚å…¬å…±äº¤é€šæ©Ÿé–¢ã§ã®ã‚¢ã‚¯ã‚»ã‚¹ã¯é™ã‚‰ã‚Œã‚‹ãŸã‚ã€è»Šã§ã®ç§»å‹•ãŒä¾¿åˆ©ã§ã™ã€‚å‘¨è¾ºã«ã¯çœ¼ç›®å±±ç«‹å±±å¯ºã‚„å¤§å²©å±±æ—¥çŸ³å¯ºãªã©ã€æ­´å²ã‚ã‚‹å¯ºé™¢ã‚‚ç‚¹åœ¨ã—ã¦ãŠã‚Šã€è‡ªç„¶ã¨æ–‡åŒ–ã®ä¸¡æ–¹ã‚’æ¥½ã—ã‚€ã“ã¨ãŒã§ãã‚‹åœ°åŸŸã§ã™ã€‚'
            }
          ];
        } else if (article.title.includes('Great Buddha')) {
          customSections = [
            {
              h2: 'é«˜å²¡å¤§ä»ã®æ­´å²çš„ä¾¡å€¤',
              content: 'é«˜å²¡å¤§ä»ã¯æ—¥æœ¬ä¸‰å¤§ä»ã®ä¸€ã¤ã¨ã—ã¦çŸ¥ã‚‰ã‚Œã€å¥ˆè‰¯ãƒ»éŒå€‰ã®å¤§ä»ã¨ä¸¦ã³ç§°ã•ã‚Œã‚‹è²´é‡ãªæ–‡åŒ–éºç”£ã§ã™ã€‚é«˜å²¡ã®ä¼çµ±å·¥èŠ¸ã§ã‚ã‚‹éŠ…å™¨è£½ä½œæŠ€è¡“ã®ç²‹ã‚’é›†ã‚ã¦å»ºç«‹ã•ã‚ŒãŸã“ã®å¤§ä»ã¯ã€åœ°åŸŸã®è·äººæŠ€è¡“ã®é«˜ã•ã‚’ç‰©èªã‚‹è±¡å¾´çš„ãªå­˜åœ¨ã¨ã—ã¦ã€å¤šãã®äººã€…ã«æ„›ã•ã‚Œç¶šã‘ã¦ã„ã¾ã™ã€‚'
            },
            {
              h2: 'é«˜å²¡å¸‚ã®è¦³å…‰æ‹ ç‚¹ã¨ã—ã¦',
              content: 'é«˜å²¡å¤§ä»ã¯é«˜å²¡å¸‚ã‚’ä»£è¡¨ã™ã‚‹è¦³å…‰ã‚¹ãƒãƒƒãƒˆã¨ã—ã¦ã€å¹´é–“ã‚’é€šã˜ã¦å¤šãã®å‚æ‹è€…ã‚„è¦³å…‰å®¢ãŒè¨ªã‚Œã¾ã™ã€‚ç‘é¾å¯ºã‚„é›¨æ™´æµ·å²¸ãªã©ã®ä»–ã®åæ‰€ã¨åˆã‚ã›ã¦æ¥½ã—ã‚€ã“ã¨ã§ã€é«˜å²¡å¸‚ã®è±Šã‹ãªæ­´å²ã¨æ–‡åŒ–ã‚’ã‚ˆã‚Šæ·±ãç†è§£ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ç‰¹ã«é‹³ç‰©ã®ç”ºã¨ã—ã¦ã®é«˜å²¡ã®ä¼çµ±ã‚’æ„Ÿã˜ã‚‰ã‚Œã‚‹è²´é‡ãªå ´æ‰€ã§ã™ã€‚'
            },
            {
              h2: 'ã‚¢ã‚¯ã‚»ã‚¹ã¨å‚æ‹ã®é­…åŠ›',
              content: 'é«˜å²¡é§…ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚‚è‰¯å¥½ã§ã€å¸‚å†…è¦³å…‰ã®ä¸­å¿ƒçš„ãªä½ç½®ã«ã‚ã‚Šã¾ã™ã€‚å¤§ä»ã®å°åº§å†…éƒ¨ã‚‚è¦‹å­¦å¯èƒ½ã§ã€é«˜å²¡ã®éŠ…å™¨ã¥ãã‚Šã®æ­´å²ã‚„æŠ€è¡“ã«ã¤ã„ã¦å­¦ã¶ã“ã¨ãŒã§ãã¾ã™ã€‚å‘¨è¾ºã«ã¯å¤ã„ç”ºä¸¦ã¿ã‚‚æ®‹ã£ã¦ãŠã‚Šã€æ•£ç­–ã‚’æ¥½ã—ã¿ãªãŒã‚‰é«˜å²¡ã®æ–‡åŒ–ã«è§¦ã‚Œã‚‹ã“ã¨ãŒã§ãã‚‹ç’°å¢ƒãŒæ•´ã£ã¦ã„ã¾ã™ã€‚'
            }
          ];
        } else if (article.title.includes('ã‚ã‹ã‚ŠãŒãƒŠã‚¤ãƒˆ')) {
          customSections = [
            {
              h2: 'ã»ãŸã‚‹ã„ã‹ãƒŸãƒ¥ãƒ¼ã‚¸ã‚¢ãƒ ã®é­…åŠ›',
              content: 'ã»ãŸã‚‹ã„ã‹ãƒŸãƒ¥ãƒ¼ã‚¸ã‚¢ãƒ ã¯ã€å¯Œå±±æ¹¾ã®ç¥ç§˜çš„ãªç™ºå…‰ç¾è±¡ã§çŸ¥ã‚‰ã‚Œã‚‹ã»ãŸã‚‹ã„ã‹ã«ã¤ã„ã¦å­¦ã¹ã‚‹æ—¥æœ¬å”¯ä¸€ã®æ–½è¨­ã§ã™ã€‚ã»ãŸã‚‹ã„ã‹ã®ç”Ÿæ…‹ã‚„å¯Œå±±æ¹¾ã®æµ·æ´‹ç’°å¢ƒã«ã¤ã„ã¦ã€ä½“é¨“å‹ã®å±•ç¤ºã‚’é€šã˜ã¦æ·±ãç†è§£ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ç‰¹ã«æ˜¥ã®ç™ºå…‰ã‚·ãƒ¼ã‚ºãƒ³ã«ã¯ã€å®Ÿéš›ã®ã»ãŸã‚‹ã„ã‹ã®å…‰ã‚‹æ§˜å­ã‚’è¦³å¯Ÿã§ãã‚‹è²´é‡ãªæ©Ÿä¼šã‚‚ã‚ã‚Šã¾ã™ã€‚'
            },
            {
              h2: 'ã€Œã‚ã‹ã‚ŠãŒãƒŠã‚¤ãƒˆã€ã‚¤ãƒ™ãƒ³ãƒˆã®ç‰¹åˆ¥æ„Ÿ',
              content: 'ã‚¤ãƒ™ãƒ³ãƒˆæœŸé–“ä¸­ã®ç‰¹åˆ¥æ–™é‡‘ã§ã®å…¥å ´ã¯ã€å¤šãã®å®¶æ—é€£ã‚Œã‚„è¦³å…‰å®¢ã«ã¨ã£ã¦å¬‰ã—ã„ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚é€šå¸¸ã¨ã¯ç•°ãªã‚‹ãƒŠã‚¤ãƒˆãƒŸãƒ¥ãƒ¼ã‚¸ã‚¢ãƒ ã¨ã—ã¦ã®æ¼”å‡ºã«ã‚ˆã‚Šã€æ˜¼é–“ã¨ã¯é•ã£ãŸå¹»æƒ³çš„ãªé›°å›²æ°—ã‚’æ¥½ã—ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚æ»‘å·å¸‚ã®è¦³å…‰æŒ¯èˆˆã®ä¸€ç’°ã¨ã—ã¦ä¼ç”»ã•ã‚Œã‚‹ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã¯ã€åœ°åŸŸæ´»æ€§åŒ–ã«ã‚‚å¤§ããè²¢çŒ®ã—ã¦ã„ã¾ã™ã€‚'
            },
            {
              h2: 'æ»‘å·å¸‚è¦³å…‰ã¨ã®é€£æº',
              content: 'æ»‘å·å¸‚ã¯å¯Œå±±æ¹¾ã«é¢ã—ãŸç¾ã—ã„æ¸¯ç”ºã¨ã—ã¦ã€æ–°é®®ãªæµ·ã®å¹¸ã‚„è‡ªç„¶æ™¯è¦³ãŒé­…åŠ›ã§ã™ã€‚ã»ãŸã‚‹ã„ã‹ãƒŸãƒ¥ãƒ¼ã‚¸ã‚¢ãƒ ã‚’ä¸­å¿ƒã¨ã—ãŸè¦³å…‰ã¯ã€å¯Œå±±çœŒã®æµ·æ´‹æ–‡åŒ–ã‚„æ¼æ¥­ã®æ­´å²ã‚’å­¦ã¶çµ¶å¥½ã®æ©Ÿä¼šã¨ãªã‚Šã¾ã™ã€‚ã‚¤ãƒ™ãƒ³ãƒˆæœŸé–“ä¸­ã¯å‘¨è¾ºæ–½è¨­ã¨ã®é€£æºä¼ç”»ã‚‚å¤šæ•°é–‹å‚¬ã•ã‚Œã€æ»‘å·å¸‚å…¨ä½“ã§è¦³å…‰å®¢ã‚’ãŠè¿ãˆã™ã‚‹ä½“åˆ¶ãŒæ•´ã£ã¦ã„ã¾ã™ã€‚'
            }
          ];
        } else if (article.title.includes('åŸç«¯æ›³å±±ç¥­')) {
          customSections = [
            {
              h2: 'ãƒ¦ãƒã‚¹ã‚³ç„¡å½¢æ–‡åŒ–éºç”£ã®ä¾¡å€¤',
              content: 'åŸç«¯æ›³å±±ç¥­ã¯300å¹´ä»¥ä¸Šã®æ­´å²ã‚’èª‡ã‚‹å—ç ºå¸‚ã®ä»£è¡¨çš„ãªç¥­ç¤¼ã§ã€2016å¹´ã«ãƒ¦ãƒã‚¹ã‚³ç„¡å½¢æ–‡åŒ–éºç”£ã«ç™»éŒ²ã•ã‚ŒãŸã€Œå±±ãƒ»é‰¾ãƒ»å±‹å°è¡Œäº‹ã€ã®ä¸€ã¤ã§ã™ã€‚ç²¾å·§ãªå½«åˆ»ãŒæ–½ã•ã‚ŒãŸæ›³å±±ã¨ã€åºµå”„ã¨å‘¼ã°ã‚Œã‚‹ç‹¬ç‰¹ãªæ°‘è¬¡ãŒç‰¹å¾´çš„ã§ã€æ—¥æœ¬ã®ä¼çµ±æ–‡åŒ–ã®ç¶™æ‰¿ã«ãŠã„ã¦é‡è¦ãªæ„å‘³ã‚’æŒã¤ç¥­ã‚Šã¨ã—ã¦ä¸–ç•Œçš„ã«èªã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚'
            },
            {
              h2: 'å—ç ºå¸‚ã®æ–‡åŒ–çš„ã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£',
              content: 'åŸç«¯æ›³å±±ç¥­ã¯å—ç ºå¸‚åŸç«¯åœ°åŒºã®æ–‡åŒ–çš„ã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®æ ¸ã¨ãªã‚‹è¡Œäº‹ã§ã™ã€‚åœ°åŸŸä½æ°‘ãŒä¸€ä½“ã¨ãªã£ã¦æº–å‚™ã—ã€ä¸–ä»£ã‚’è¶…ãˆã¦æŠ€è¡“ã‚„ä¼çµ±ã‚’å—ã‘ç¶™ãã“ã¨ã§ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®çµæŸã‚’æ·±ã‚ã‚‹é‡è¦ãªå½¹å‰²ã‚’æœãŸã—ã¦ã„ã¾ã™ã€‚ç¥­ã‚Šã«ä½¿ã‚ã‚Œã‚‹æ›³å±±ã‚„åºµå±‹å°ã®è£…é£¾ã¯ã€åœ°åŸŸã®è·äººæŠ€è¡“ã®ç²‹ã‚’é›†ã‚ãŸèŠ¸è¡“ä½œå“ã¨ã—ã¦ã‚‚é«˜ãè©•ä¾¡ã•ã‚Œã¦ã„ã¾ã™ã€‚'
            },
            {
              h2: 'è¦³å…‰ã¨æ–‡åŒ–ç¶™æ‰¿ã®ä¸¡ç«‹',
              content: 'è¿‘å¹´ã¯è¦³å…‰è³‡æºã¨ã—ã¦ã‚‚æ³¨ç›®ã‚’é›†ã‚ã‚‹ä¸€æ–¹ã§ã€åœ°åŸŸä½æ°‘ã«ã‚ˆã‚‹æ–‡åŒ–ç¶™æ‰¿ã®å–ã‚Šçµ„ã¿ãŒæœ€é‡è¦è¦–ã•ã‚Œã¦ã„ã¾ã™ã€‚ç¥­ã‚ŠæœŸé–“ä¸­ã¯å¤šãã®è¦³å…‰å®¢ãŒè¨ªã‚Œã¾ã™ãŒã€åœ°åŸŸã®ä¼çµ±ã‚’å°Šé‡ã—ãŸè¦³å…‰æŒ¯èˆˆãŒå›³ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚å—ç ºå¸‚å…¨ä½“ã®æ–‡åŒ–è¦³å…‰ã®ä¸­å¿ƒçš„ãªå½¹å‰²ã‚’æ‹…ã„ã€ä»–ã®ä¼çµ±è¡Œäº‹ã¨ã®é€£æºã«ã‚ˆã‚Šã€åœ°åŸŸå…¨ä½“ã®æ–‡åŒ–çš„ä¾¡å€¤å‘ä¸Šã«è²¢çŒ®ã—ã¦ã„ã¾ã™ã€‚'
            }
          ];
        }
        
        // ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ 
        customSections.forEach((section, index) => {
          enhancedBody.push({
            _type: 'block',
            _key: `custom-h2-${index + 1}-${Date.now()}`,
            style: 'h2',
            children: [{
              _type: 'span',
              _key: `custom-h2-span-${index + 1}-${Date.now()}`,
              text: section.h2,
              marks: []
            }],
            markDefs: []
          });
          
          enhancedBody.push({
            _type: 'block',
            _key: `custom-content-${index + 1}-${Date.now()}`,
            style: 'normal',
            children: [{
              _type: 'span',
              _key: `custom-content-span-${index + 1}-${Date.now()}`,
              text: section.content,
              marks: []
            }],
            markDefs: []
          });
        });
        
        // è¨˜äº‹ã‚’æ›´æ–°
        await client
          .patch(articleId)
          .set({
            body: enhancedBody,
            _updatedAt: new Date().toISOString()
          })
          .commit();
        
        console.log('   âœ… æ‹¡å……å®Œäº†');
        successCount++;
        
        await new Promise(resolve => setTimeout(resolve, 800));
        
      } catch (error) {
        console.error(`   âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}`);
      }
    }
    
    console.log(`\nğŸŠ æœ€çµ‚çµæœ: ${successCount}/4ä»¶ å®Œäº†`);
    
    if (successCount === 4) {
      console.log('\nğŸŒŸ PHASE 3 å®Œå…¨å®Œäº†ï¼');
      console.log('çŸ­ã„è¨˜äº‹ã®æ‹¡å……ãŒå…¨ã¦å®Œäº†ã—ã¾ã—ãŸï¼');
    }
    
  } catch (error) {
    console.error('âŒ ã‚¨ãƒ©ãƒ¼:', error.message);
  }
}

completeFinalArticles();