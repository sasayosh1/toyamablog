<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“ Sanityè¨˜äº‹ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .header {
            text-align: center;
            background: #667eea;
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        .section {
            background: #f8f9fa;
            margin: 20px 0;
            padding: 25px;
            border-radius: 15px;
            border-left: 5px solid #667eea;
        }
        .section h3 {
            margin: 0 0 15px 0;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .form-group {
            margin: 15px 0;
        }
        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 5px;
            color: #2c3e50;
        }
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }
        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }
        .article-content {
            min-height: 400px;
            font-family: 'SF Mono', Monaco, monospace;
        }
        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            margin: 8px;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        button:hover {
            background: #5a67d8;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .btn-success { background: #28a745; }
        .btn-success:hover { background: #218838; }
        .btn-warning { background: #ffc107; color: #212529; }
        .btn-warning:hover { background: #e0a800; }
        .btn-danger { background: #dc3545; }
        .btn-danger:hover { background: #c82333; }
        .btn-info { background: #17a2b8; }
        .btn-info:hover { background: #138496; }
        
        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        @media (max-width: 768px) {
            .grid { grid-template-columns: 1fr; }
        }
        
        .status {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-weight: 600;
        }
        .status.success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .status.error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .status.warning { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        .status.info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        
        .article-list {
            max-height: 300px;
            overflow-y: auto;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 10px;
        }
        .article-item {
            padding: 10px;
            border-bottom: 1px solid #e9ecef;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        .article-item:hover {
            background-color: #f8f9fa;
        }
        .article-item.selected {
            background-color: #e3f2fd;
            border-left: 4px solid #667eea;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }
        .loading.show {
            display: block;
        }
        
        .character-count {
            font-size: 12px;
            color: #6c757d;
            text-align: right;
            margin-top: 5px;
        }
        
        .preview-section {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“ Sanityè¨˜äº‹ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼</h1>
            <p>è¨˜äº‹ã®æ¤œç´¢ã€ç·¨é›†ã€æ›´æ–°ã‚’ç°¡å˜ã«è¡Œãˆã‚‹ãƒ„ãƒ¼ãƒ«</p>
            <p><strong>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID:</strong> aoxze287 | <strong>ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ:</strong> production</p>
        </div>

        <!-- è¨˜äº‹æ¤œç´¢ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="section">
            <h3>ğŸ” è¨˜äº‹æ¤œç´¢</h3>
            <div class="grid">
                <div class="form-group">
                    <label for="search-query">æ¤œç´¢ã‚¯ã‚¨ãƒª</label>
                    <input type="text" id="search-query" placeholder="è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«ã€ã‚«ãƒ†ã‚´ãƒªã€ã¾ãŸã¯å†…å®¹ã§æ¤œç´¢">
                </div>
                <div class="form-group">
                    <label for="search-filter">ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼</label>
                    <select id="search-filter">
                        <option value="all">ã™ã¹ã¦</option>
                        <option value="published">å…¬é–‹æ¸ˆã¿</option>
                        <option value="draft">ä¸‹æ›¸ã</option>
                        <option value="with-youtube">YouTubeå‹•ç”»ã‚ã‚Š</option>
                        <option value="no-category">ã‚«ãƒ†ã‚´ãƒªãªã—</option>
                        <option value="short-content">çŸ­ã„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</option>
                    </select>
                </div>
            </div>
            <button onclick="searchArticles()" class="btn-info">ğŸ” æ¤œç´¢å®Ÿè¡Œ</button>
            <button onclick="loadRecentArticles()" class="btn-success">ğŸ“… æœ€è¿‘ã®è¨˜äº‹ã‚’èª­ã¿è¾¼ã¿</button>
        </div>

        <!-- è¨˜äº‹ä¸€è¦§ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="section">
            <h3>ğŸ“‹ è¨˜äº‹ä¸€è¦§</h3>
            <div id="article-list" class="article-list">
                <div class="loading" id="loading">
                    <p>ğŸ”„ èª­ã¿è¾¼ã¿ä¸­...</p>
                </div>
            </div>
            <div class="status info">
                é¸æŠã—ãŸè¨˜äº‹: <span id="selected-article">ãªã—</span>
            </div>
        </div>

        <!-- è¨˜äº‹ç·¨é›†ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="section">
            <h3>âœï¸ è¨˜äº‹ç·¨é›†</h3>
            
            <div class="grid">
                <div class="form-group">
                    <label for="article-title">ã‚¿ã‚¤ãƒˆãƒ«</label>
                    <input type="text" id="article-title" placeholder="è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«">
                </div>
                <div class="form-group">
                    <label for="article-category">ã‚«ãƒ†ã‚´ãƒª</label>
                    <input type="text" id="article-category" placeholder="ã‚«ãƒ†ã‚´ãƒªå">
                </div>
            </div>
            
            <div class="form-group">
                <label for="article-excerpt">æ¦‚è¦ (Excerpt)</label>
                <textarea id="article-excerpt" placeholder="è¨˜äº‹ã®æ¦‚è¦ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"></textarea>
                <div class="character-count" id="excerpt-count">0æ–‡å­—</div>
            </div>
            
            <div class="form-group">
                <label for="article-tags">ã‚¿ã‚° (ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Š)</label>
                <input type="text" id="article-tags" placeholder="ã‚¿ã‚°1, ã‚¿ã‚°2, ã‚¿ã‚°3">
            </div>
            
            <div class="form-group">
                <label for="youtube-url">YouTube URL</label>
                <input type="url" id="youtube-url" placeholder="https://youtube.com/watch?v=...">
            </div>
            
            <div class="form-group">
                <label for="article-content">è¨˜äº‹å†…å®¹</label>
                <textarea id="article-content" class="article-content" placeholder="è¨˜äº‹ã®å†…å®¹ã‚’ã“ã“ã«å…¥åŠ›ã—ã¦ãã ã•ã„..."></textarea>
                <div class="character-count" id="content-count">0æ–‡å­—</div>
            </div>
        </div>

        <!-- ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="section">
            <h3>ğŸ‘ï¸ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</h3>
            <div class="preview-section" id="article-preview">
                <p class="status info">è¨˜äº‹ã‚’é¸æŠã—ã¦ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’è¡¨ç¤º</p>
            </div>
            <button onclick="generatePreview()" class="btn-info">ğŸ‘ï¸ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”Ÿæˆ</button>
        </div>

        <!-- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="section">
            <h3>ğŸš€ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</h3>
            <div class="grid">
                <div>
                    <button onclick="saveArticle()" class="btn-success">ğŸ’¾ è¨˜äº‹ã‚’ä¿å­˜</button>
                    <button onclick="publishArticle()" class="btn-warning">ğŸ“¢ è¨˜äº‹ã‚’å…¬é–‹</button>
                </div>
                <div>
                    <button onclick="duplicateArticle()" class="btn-info">ğŸ“„ è¨˜äº‹ã‚’è¤‡è£½</button>
                    <button onclick="deleteArticle()" class="btn-danger">ğŸ—‘ï¸ è¨˜äº‹ã‚’å‰Šé™¤</button>
                </div>
            </div>
        </div>

        <!-- ãƒ­ã‚°ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="section">
            <h3>ğŸ“Š ãƒ­ã‚°</h3>
            <div id="log-area" style="background: #2d3748; color: #e2e8f0; padding: 20px; border-radius: 8px; font-family: monospace; height: 200px; overflow-y: auto;">
                <div>ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã¾ã™...</div>
            </div>
            <button onclick="clearLog()" class="btn-warning">ğŸ§¹ ãƒ­ã‚°ã‚¯ãƒªã‚¢</button>
        </div>
    </div>

    <script>
        let selectedArticleId = null;
        let articles = [];

        // ãƒ­ã‚°å‡ºåŠ›
        function log(message, type = 'info') {
            const logArea = document.getElementById('log-area');
            const time = new Date().toLocaleTimeString();
            const color = {
                info: '#17a2b8',
                success: '#28a745',
                warning: '#ffc107',
                error: '#dc3545'
            }[type] || '#17a2b8';
            
            const logEntry = document.createElement('div');
            logEntry.style.color = color;
            logEntry.innerHTML = `[${time}] ${message}`;
            logArea.appendChild(logEntry);
            logArea.scrollTop = logArea.scrollHeight;
        }

        // æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ãƒˆ
        function setupCharacterCount() {
            const excerptField = document.getElementById('article-excerpt');
            const contentField = document.getElementById('article-content');
            
            excerptField.addEventListener('input', () => {
                document.getElementById('excerpt-count').textContent = excerptField.value.length + 'æ–‡å­—';
            });
            
            contentField.addEventListener('input', () => {
                document.getElementById('content-count').textContent = contentField.value.length + 'æ–‡å­—';
            });
        }

        // æœ€è¿‘ã®è¨˜äº‹ã‚’èª­ã¿è¾¼ã¿
        async function loadRecentArticles() {
            showLoading(true);
            log('æœ€è¿‘ã®è¨˜äº‹ã‚’èª­ã¿è¾¼ã¿ä¸­...', 'info');
            
            try {
                // ã“ã®éƒ¨åˆ†ã¯å®Ÿéš›ã®Sanity APIã‚¯ã‚¨ãƒªã«ç½®ãæ›ãˆã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™
                const response = await mockApiCall('/api/articles/recent');
                articles = response.articles;
                displayArticles(articles);
                log(`${articles.length}ä»¶ã®è¨˜äº‹ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ`, 'success');
            } catch (error) {
                log(`è¨˜äº‹ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—: ${error.message}`, 'error');
            } finally {
                showLoading(false);
            }
        }

        // è¨˜äº‹æ¤œç´¢
        async function searchArticles() {
            const query = document.getElementById('search-query').value;
            const filter = document.getElementById('search-filter').value;
            
            if (!query && filter === 'all') {
                log('æ¤œç´¢ã‚¯ã‚¨ãƒªã¾ãŸã¯ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’æŒ‡å®šã—ã¦ãã ã•ã„', 'warning');
                return;
            }
            
            showLoading(true);
            log(`æ¤œç´¢å®Ÿè¡Œ: "${query}" (ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼: ${filter})`, 'info');
            
            try {
                const response = await mockApiCall('/api/articles/search', { query, filter });
                articles = response.articles;
                displayArticles(articles);
                log(`${articles.length}ä»¶ã®è¨˜äº‹ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ`, 'success');
            } catch (error) {
                log(`æ¤œç´¢ã«å¤±æ•—: ${error.message}`, 'error');
            } finally {
                showLoading(false);
            }
        }

        // è¨˜äº‹ä¸€è¦§è¡¨ç¤º
        function displayArticles(articles) {
            const listContainer = document.getElementById('article-list');
            listContainer.innerHTML = '<div class="loading" id="loading"><p>ğŸ”„ èª­ã¿è¾¼ã¿ä¸­...</p></div>';
            
            if (articles.length === 0) {
                listContainer.innerHTML = '<div class="status warning">è¨˜äº‹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ</div>';
                return;
            }
            
            const listHTML = articles.map(article => `
                <div class="article-item" onclick="selectArticle('${article._id}')">
                    <strong>${article.title || 'ç„¡é¡Œ'}</strong>
                    <div style="font-size: 12px; color: #6c757d;">
                        ã‚«ãƒ†ã‚´ãƒª: ${article.category || 'ãªã—'} | 
                        å…¬é–‹æ—¥: ${article.publishedAt ? new Date(article.publishedAt).toLocaleDateString('ja-JP') : 'æœªå…¬é–‹'}
                        ${article.youtubeUrl ? ' | ğŸ“¹ YouTube' : ''}
                    </div>
                </div>
            `).join('');
            
            listContainer.innerHTML = listHTML;
        }

        // è¨˜äº‹é¸æŠ
        function selectArticle(articleId) {
            selectedArticleId = articleId;
            const article = articles.find(a => a._id === articleId);
            
            if (!article) {
                log('è¨˜äº‹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“', 'error');
                return;
            }
            
            // é¸æŠçŠ¶æ…‹ã®è¡¨ç¤ºæ›´æ–°
            document.querySelectorAll('.article-item').forEach(item => {
                item.classList.remove('selected');
            });
            event.target.closest('.article-item').classList.add('selected');
            
            // ãƒ•ã‚©ãƒ¼ãƒ ã«è¨˜äº‹ãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š
            document.getElementById('article-title').value = article.title || '';
            document.getElementById('article-category').value = article.category || '';
            document.getElementById('article-excerpt').value = article.excerpt || '';
            document.getElementById('article-tags').value = article.tags ? article.tags.join(', ') : '';
            document.getElementById('youtube-url').value = article.youtubeUrl || '';
            document.getElementById('article-content').value = article.bodyText || '';
            
            // æ–‡å­—æ•°æ›´æ–°
            document.getElementById('excerpt-count').textContent = (article.excerpt || '').length + 'æ–‡å­—';
            document.getElementById('content-count').textContent = (article.bodyText || '').length + 'æ–‡å­—';
            
            document.getElementById('selected-article').textContent = article.title || 'ç„¡é¡Œ';
            log(`è¨˜äº‹ã‚’é¸æŠ: ${article.title}`, 'success');
        }

        // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”Ÿæˆ
        function generatePreview() {
            const title = document.getElementById('article-title').value;
            const category = document.getElementById('article-category').value;
            const excerpt = document.getElementById('article-excerpt').value;
            const tags = document.getElementById('article-tags').value;
            const youtubeUrl = document.getElementById('youtube-url').value;
            const content = document.getElementById('article-content').value;
            
            const previewHTML = `
                <h2>${title || 'ç„¡é¡Œ'}</h2>
                <div style="color: #6c757d; margin-bottom: 15px;">
                    <strong>ã‚«ãƒ†ã‚´ãƒª:</strong> ${category || 'ãªã—'} | 
                    <strong>ã‚¿ã‚°:</strong> ${tags || 'ãªã—'}
                    ${youtubeUrl ? ' | <strong>YouTube:</strong> âœ…' : ''}
                </div>
                <div style="background: #e9ecef; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                    <strong>æ¦‚è¦:</strong> ${excerpt || 'æ¦‚è¦ãªã—'}
                </div>
                <div style="white-space: pre-wrap; line-height: 1.6;">
                    ${content || 'ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãªã—'}
                </div>
            `;
            
            document.getElementById('article-preview').innerHTML = previewHTML;
            log('ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ç”Ÿæˆã—ã¾ã—ãŸ', 'success');
        }

        // è¨˜äº‹ä¿å­˜
        async function saveArticle() {
            if (!selectedArticleId) {
                log('ä¿å­˜ã™ã‚‹ã«ã¯è¨˜äº‹ã‚’é¸æŠã—ã¦ãã ã•ã„', 'warning');
                return;
            }
            
            const articleData = {
                title: document.getElementById('article-title').value,
                category: document.getElementById('article-category').value,
                excerpt: document.getElementById('article-excerpt').value,
                tags: document.getElementById('article-tags').value.split(',').map(tag => tag.trim()).filter(tag => tag),
                youtubeUrl: document.getElementById('youtube-url').value,
                bodyText: document.getElementById('article-content').value
            };
            
            log('è¨˜äº‹ã‚’ä¿å­˜ä¸­...', 'info');
            
            try {
                await mockApiCall('/api/articles/update', { id: selectedArticleId, data: articleData });
                log('è¨˜äº‹ã‚’ä¿å­˜ã—ã¾ã—ãŸ', 'success');
            } catch (error) {
                log(`ä¿å­˜ã«å¤±æ•—: ${error.message}`, 'error');
            }
        }

        // è¨˜äº‹å…¬é–‹
        async function publishArticle() {
            if (!selectedArticleId) {
                log('å…¬é–‹ã™ã‚‹ã«ã¯è¨˜äº‹ã‚’é¸æŠã—ã¦ãã ã•ã„', 'warning');
                return;
            }
            
            if (!confirm('ã“ã®è¨˜äº‹ã‚’å…¬é–‹ã—ã¾ã™ã‹ï¼Ÿ')) {
                return;
            }
            
            log('è¨˜äº‹ã‚’å…¬é–‹ä¸­...', 'info');
            
            try {
                await mockApiCall('/api/articles/publish', { id: selectedArticleId });
                log('è¨˜äº‹ã‚’å…¬é–‹ã—ã¾ã—ãŸ', 'success');
            } catch (error) {
                log(`å…¬é–‹ã«å¤±æ•—: ${error.message}`, 'error');
            }
        }

        // è¨˜äº‹è¤‡è£½
        async function duplicateArticle() {
            if (!selectedArticleId) {
                log('è¤‡è£½ã™ã‚‹ã«ã¯è¨˜äº‹ã‚’é¸æŠã—ã¦ãã ã•ã„', 'warning');
                return;
            }
            
            log('è¨˜äº‹ã‚’è¤‡è£½ä¸­...', 'info');
            
            try {
                const response = await mockApiCall('/api/articles/duplicate', { id: selectedArticleId });
                log(`è¨˜äº‹ã‚’è¤‡è£½ã—ã¾ã—ãŸ: ${response.newArticleId}`, 'success');
                await loadRecentArticles(); // è¨˜äº‹ä¸€è¦§ã‚’æ›´æ–°
            } catch (error) {
                log(`è¤‡è£½ã«å¤±æ•—: ${error.message}`, 'error');
            }
        }

        // è¨˜äº‹å‰Šé™¤
        async function deleteArticle() {
            if (!selectedArticleId) {
                log('å‰Šé™¤ã™ã‚‹ã«ã¯è¨˜äº‹ã‚’é¸æŠã—ã¦ãã ã•ã„', 'warning');
                return;
            }
            
            if (!confirm('ã“ã®è¨˜äº‹ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚')) {
                return;
            }
            
            log('è¨˜äº‹ã‚’å‰Šé™¤ä¸­...', 'info');
            
            try {
                await mockApiCall('/api/articles/delete', { id: selectedArticleId });
                log('è¨˜äº‹ã‚’å‰Šé™¤ã—ã¾ã—ãŸ', 'success');
                selectedArticleId = null;
                document.getElementById('selected-article').textContent = 'ãªã—';
                await loadRecentArticles(); // è¨˜äº‹ä¸€è¦§ã‚’æ›´æ–°
            } catch (error) {
                log(`å‰Šé™¤ã«å¤±æ•—: ${error.message}`, 'error');
            }
        }

        // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
        function showLoading(show) {
            const loading = document.getElementById('loading');
            if (show) {
                loading.classList.add('show');
            } else {
                loading.classList.remove('show');
            }
        }

        // ãƒ­ã‚°ã‚¯ãƒªã‚¢
        function clearLog() {
            document.getElementById('log-area').innerHTML = '<div>ãƒ­ã‚°ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ</div>';
        }

        // ãƒ¢ãƒƒã‚¯APIã‚³ãƒ¼ãƒ«ï¼ˆå®Ÿéš›ã®å®Ÿè£…ã§ã¯Sanity APIã«ç½®ãæ›ãˆã‚‹ï¼‰
        async function mockApiCall(endpoint, data = {}) {
            // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ã€ã“ã“ã§Sanity APIã‚’å‘¼ã³å‡ºã—ã¾ã™
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    if (Math.random() > 0.1) { // 90%ã®ç¢ºç‡ã§æˆåŠŸ
                        resolve({
                            articles: [
                                {
                                    _id: '1',
                                    title: 'ã€å¯Œå±±å¸‚ã€‘æ±äº¬ãƒ‡ã‚£ã‚ºãƒ‹ãƒ¼ãƒªã‚¾ãƒ¼ãƒˆ40å‘¨å¹´ã‚¹ãƒšã‚·ãƒ£ãƒ«ãƒ‘ãƒ¬ãƒ¼ãƒ‰å…¨å›½ç‰ˆ å¯Œå±±ã¾ã¤ã‚Š2023',
                                    category: 'å¯Œå±±å¸‚',
                                    excerpt: '2023å¹´ã¯æ±äº¬ãƒ‡ã‚£ã‚ºãƒ‹ãƒ¼ãƒªã‚¾ãƒ¼ãƒˆãŒé–‹åœ’ã—ã¦ã‹ã‚‰40å‘¨å¹´ã¨ã„ã†è¨˜å¿µã™ã¹ãå¹´ã§ã—ãŸ...',
                                    tags: ['å¯Œå±±å¸‚', 'ã‚¤ãƒ™ãƒ³ãƒˆ', 'ãƒ‡ã‚£ã‚ºãƒ‹ãƒ¼'],
                                    youtubeUrl: 'https://youtube.com/watch?v=example',
                                    bodyText: 'ã“ã“ã«è¨˜äº‹ã®æœ¬æ–‡ãŒå…¥ã‚Šã¾ã™...',
                                    publishedAt: '2023-10-15T10:00:00Z'
                                }
                            ],
                            newArticleId: 'new-article-id'
                        });
                    } else {
                        reject(new Error('APIå‘¼ã³å‡ºã—ã«å¤±æ•—ã—ã¾ã—ãŸ'));
                    }
                }, 1000);
            });
        }

        // åˆæœŸåŒ–
        function init() {
            log('è¨˜äº‹ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã‚’åˆæœŸåŒ–ã—ã¾ã—ãŸ', 'success');
            setupCharacterCount();
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«åˆæœŸåŒ–
        window.onload = init;
    </script>
</body>
</html>