<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¯ æ‰‹å‹•ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #17a2b8, #138496);
            min-height: 100vh;
        }
        .container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .header {
            text-align: center;
            background: #17a2b8;
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        .step {
            background: #f8f9fa;
            margin: 20px 0;
            padding: 25px;
            border-radius: 15px;
            border-left: 5px solid #17a2b8;
        }
        .step h3 {
            margin: 0 0 15px 0;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .step-number {
            background: #17a2b8;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            font-family: 'SF Mono', Monaco, monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 15px 0;
            white-space: pre-wrap;
            border: 2px solid #4a5568;
        }
        .instruction {
            background: #e7f3ff;
            border: 2px solid #17a2b8;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
        }
        .success {
            background: #d4edda;
            border: 2px solid #28a745;
            color: #155724;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
        }
        .warning {
            background: #fff3cd;
            border: 2px solid #ffc107;
            color: #856404;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
        }
        button {
            background: #17a2b8;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        button:hover {
            background: #138496;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .btn-success { background: #28a745; }
        .btn-success:hover { background: #218838; }
        .btn-primary { background: #007bff; }
        .btn-primary:hover { background: #0056b3; }
        .large-button {
            font-size: 18px;
            padding: 20px 40px;
        }
        .event-test {
            background: #f8f9fa;
            border: 2px solid #17a2b8;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
        }
        .test-result {
            background: #e9ecef;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¯ æ‰‹å‹•ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ãƒ†ã‚¹ãƒˆ</h1>
            <p><strong>ç›®çš„:</strong> ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã®é€ä¿¡ã¨GA4ã§ã®è¨˜éŒ²ç¢ºèª</p>
            <p><strong>æ¸¬å®šID:</strong> G-5VS8BF91VH</p>
            <p><strong>ãƒ†ã‚¹ãƒˆæ™‚åˆ»:</strong> <span id="timestamp"></span></p>
        </div>

        <div class="step">
            <h3><span class="step-number">1</span>ğŸŒ TOYAMA BLOGã‚’é–‹ã</h3>
            <p>ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ãƒ†ã‚¹ãƒˆã®ãŸã‚ã€å®Ÿéš›ã®ã‚µã‚¤ãƒˆã‚’æ–°ã—ã„ã‚¿ãƒ–ã§é–‹ãã¾ã™ã€‚</p>
            
            <button class="large-button btn-success" onclick="openSiteForEventTest()">
                ğŸš€ TOYAMA BLOGã‚’é–‹ã
            </button>
            
            <div class="warning">
                <strong>ğŸ“ é‡è¦:</strong> æ–°ã—ã„ã‚¿ãƒ–ãŒé–‹ã„ãŸã‚‰ã€ãã®ã‚¿ãƒ–ã§DevTools (F12) ã‚’é–‹ã„ã¦Consoleã‚¿ãƒ–ã¨Networkã‚¿ãƒ–ã‚’æº–å‚™ã—ã¦ãã ã•ã„ã€‚
            </div>
        </div>

        <div class="step">
            <h3><span class="step-number">2</span>ğŸ¯ åŸºæœ¬ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ãƒ†ã‚¹ãƒˆ</h3>
            <p>æœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãªã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã‚’é€ä¿¡ã—ã¦ã€GA4ã§ã®è¨˜éŒ²ã‚’ç¢ºèªã—ã¾ã™ã€‚</p>
            
            <div class="instruction">
                <strong>ãƒ†ã‚¹ãƒˆæ‰‹é †:</strong>
                <ol>
                    <li>TOYAMA BLOGã®DevTools Consoleã‚’é–‹ã</li>
                    <li>ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã¦è²¼ã‚Šä»˜ã‘</li>
                    <li>Enterã‚­ãƒ¼ã§å®Ÿè¡Œ</li>
                    <li>Networkã‚¿ãƒ–ã§ã€Œcollectã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç¢ºèª</li>
                </ol>
            </div>

            <div class="code-block">// åŸºæœ¬ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ãƒ†ã‚¹ãƒˆ
if (typeof window.gtag === 'function') {
    console.log('ğŸ¯ åŸºæœ¬ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ãƒ†ã‚¹ãƒˆé–‹å§‹');
    
    // ã‚·ãƒ³ãƒ—ãƒ«ãªã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆ
    window.gtag('event', 'test_button_click', {
        event_category: 'engagement',
        event_label: 'manual_test_basic',
        value: 1
    });
    
    console.log('âœ… åŸºæœ¬ã‚¤ãƒ™ãƒ³ãƒˆã‚’é€ä¿¡ã—ã¾ã—ãŸ');
    console.log('ğŸ’¡ Networkã‚¿ãƒ–ã§collectãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç¢ºèªã—ã¦ãã ã•ã„');
} else {
    console.log('âŒ gtagé–¢æ•°ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“');
}</div>
            
            <button onclick="copyBasicEventScript()">ğŸ“‹ åŸºæœ¬ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ã‚³ãƒ”ãƒ¼</button>
        </div>

        <div class="step">
            <h3><span class="step-number">3</span>ğŸ“Š è©³ç´°ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ãƒ†ã‚¹ãƒˆ</h3>
            <p>ã‚ˆã‚Šè©³ç´°ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å«ã‚€ã‚¤ãƒ™ãƒ³ãƒˆã‚’é€ä¿¡ã—ã¦ã€GA4ã§ã®è©³ç´°è¨˜éŒ²ã‚’ç¢ºèªã—ã¾ã™ã€‚</p>

            <div class="code-block">// è©³ç´°ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ãƒ†ã‚¹ãƒˆ
if (typeof window.gtag === 'function') {
    console.log('ğŸ“Š è©³ç´°ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ãƒ†ã‚¹ãƒˆé–‹å§‹');
    
    const timestamp = Date.now();
    
    // è©³ç´°ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä»˜ãã‚¤ãƒ™ãƒ³ãƒˆ
    window.gtag('event', 'detailed_interaction', {
        event_category: 'user_engagement',
        event_label: `manual_test_detailed_${timestamp}`,
        value: 5,
        custom_parameter_1: 'console_test',
        custom_parameter_2: 'detailed_verification',
        test_timestamp: timestamp,
        user_action: 'manual_event_test'
    });
    
    console.log('âœ… è©³ç´°ã‚¤ãƒ™ãƒ³ãƒˆã‚’é€ä¿¡ã—ã¾ã—ãŸ');
    console.log(`ğŸ“Š ã‚¤ãƒ™ãƒ³ãƒˆID: detailed_interaction_${timestamp}`);
    console.log('ğŸ’¡ GA4ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¬ãƒãƒ¼ãƒˆã§ç¢ºèªã—ã¦ãã ã•ã„');
} else {
    console.log('âŒ gtagé–¢æ•°ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“');
}</div>
            
            <button onclick="copyDetailedEventScript()">ğŸ“‹ è©³ç´°ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ã‚³ãƒ”ãƒ¼</button>
        </div>

        <div class="step">
            <h3><span class="step-number">4</span>ğŸ”„ é€£ç¶šã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ãƒ†ã‚¹ãƒˆ</h3>
            <p>è¤‡æ•°ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’é€£ç¶šã§é€ä¿¡ã—ã¦ã€GA4ã§ã®å‡¦ç†èƒ½åŠ›ã‚’ç¢ºèªã—ã¾ã™ã€‚</p>

            <div class="code-block">// é€£ç¶šã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ãƒ†ã‚¹ãƒˆ
if (typeof window.gtag === 'function') {
    console.log('ğŸ”„ é€£ç¶šã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ãƒ†ã‚¹ãƒˆé–‹å§‹');
    
    const events = [
        { name: 'page_scroll', category: 'engagement', label: 'scroll_test' },
        { name: 'content_view', category: 'content', label: 'article_view' },
        { name: 'user_interaction', category: 'engagement', label: 'click_test' },
        { name: 'custom_conversion', category: 'conversion', label: 'test_conversion' }
    ];
    
    events.forEach((event, index) => {
        setTimeout(() => {
            window.gtag('event', event.name, {
                event_category: event.category,
                event_label: `${event.label}_${index + 1}`,
                value: index + 1,
                test_sequence: index + 1,
                batch_id: 'continuous_test_' + Date.now()
            });
            console.log(`âœ… ã‚¤ãƒ™ãƒ³ãƒˆ${index + 1}/${events.length}: ${event.name} ã‚’é€ä¿¡`);
        }, index * 1000); // 1ç§’é–“éš”ã§é€ä¿¡
    });
    
    console.log('ğŸš€ 4ã¤ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’1ç§’é–“éš”ã§é€ä¿¡é–‹å§‹');
    console.log('ğŸ’¡ 4ç§’å¾Œã«å®Œäº†äºˆå®šã§ã™');
} else {
    console.log('âŒ gtagé–¢æ•°ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“');
}</div>
            
            <button onclick="copyContinuousEventScript()">ğŸ“‹ é€£ç¶šã‚¤ãƒ™ãƒ³ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ã‚³ãƒ”ãƒ¼</button>
        </div>

        <div class="step">
            <h3><span class="step-number">5</span>ğŸ“ˆ GA4ã§ã®ç¢ºèªæ–¹æ³•</h3>
            <p>é€ä¿¡ã—ãŸã‚¤ãƒ™ãƒ³ãƒˆãŒGA4ã§æ­£ã—ãè¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚</p>
            
            <div class="instruction">
                <strong>ç¢ºèªæ‰‹é †:</strong>
                <ol>
                    <li><strong>DevTools Networkç¢ºèª:</strong> collect ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å³åº§ã®ç™ºç”Ÿ</li>
                    <li><strong>GA4ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¬ãƒãƒ¼ãƒˆ:</strong> ã‚¤ãƒ™ãƒ³ãƒˆæ•°ã®å¢—åŠ ï¼ˆ1-2åˆ†å¾Œï¼‰</li>
                    <li><strong>GA4ã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆ:</strong> è©³ç´°ãªã‚¤ãƒ™ãƒ³ãƒˆè¨˜éŒ²ï¼ˆæ•°åˆ†å¾Œï¼‰</li>
                </ol>
            </div>
            
            <button class="btn-primary" onclick="openGA4Events()">ğŸ“Š GA4ã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆã‚’é–‹ã</button>
            <button class="btn-primary" onclick="openGA4Realtime()">â±ï¸ GA4ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¬ãƒãƒ¼ãƒˆã‚’é–‹ã</button>
        </div>

        <div class="step">
            <h3><span class="step-number">6</span>ğŸ§ª ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</h3>
            <p>ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ã§å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆã®è¨ºæ–­ã¨è§£æ±ºæ–¹æ³•ã€‚</p>
            
            <div class="event-test">
                <h4>ğŸ” è¨ºæ–­ã‚¹ã‚¯ãƒªãƒ—ãƒˆ</h4>
                <div class="code-block">// GA4ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡è¨ºæ–­
console.log('ğŸ” GA4ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡è¨ºæ–­é–‹å§‹');

// 1. gtagé–¢æ•°ç¢ºèª
if (typeof window.gtag === 'function') {
    console.log('âœ… gtagé–¢æ•°: åˆ©ç”¨å¯èƒ½');
    
    // 2. dataLayerç¢ºèª
    if (Array.isArray(window.dataLayer)) {
        console.log(`âœ… dataLayer: ${window.dataLayer.length}å€‹ã®è¦ç´ `);
        
        // 3. æ¸¬å®šIDç¢ºèª
        const hasGA4 = window.dataLayer.some(item => 
            Array.isArray(item) && item.includes('G-5VS8BF91VH')
        );
        console.log(`${hasGA4 ? 'âœ…' : 'âŒ'} æ¸¬å®šID G-5VS8BF91VH: ${hasGA4 ? 'ç¢ºèªæ¸ˆã¿' : 'æœªç¢ºèª'}`);
        
        // 4. ãƒ†ã‚¹ãƒˆã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡
        console.log('ğŸ§ª è¨ºæ–­ç”¨ãƒ†ã‚¹ãƒˆã‚¤ãƒ™ãƒ³ãƒˆã‚’é€ä¿¡...');
        window.gtag('event', 'diagnostic_test', {
            event_category: 'troubleshooting',
            event_label: 'diagnostic_event',
            diagnostic_timestamp: Date.now()
        });
        console.log('âœ… è¨ºæ–­ç”¨ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡å®Œäº†');
        
    } else {
        console.log('âŒ dataLayer: åˆ©ç”¨ä¸å¯');
    }
} else {
    console.log('âŒ gtagé–¢æ•°: åˆ©ç”¨ä¸å¯');
    console.log('ğŸ’¡ ãƒšãƒ¼ã‚¸ãŒå®Œå…¨ã«èª­ã¿è¾¼ã¾ã‚Œã¦ã„ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™');
}

console.log('ğŸ” è¨ºæ–­å®Œäº†');</div>
                
                <button onclick="copyDiagnosticScript()">ğŸ“‹ è¨ºæ–­ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ã‚³ãƒ”ãƒ¼</button>
            </div>
        </div>

        <div class="step">
            <h3><span class="step-number">7</span>ğŸ“Š æœ€çµ‚ãƒ†ã‚¹ãƒˆçµæœ</h3>
            <p>å…¨ã¦ã®ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ãƒ†ã‚¹ãƒˆã®çµæœã‚’ã¾ã¨ã‚ã¦è¨˜éŒ²ã—ã¾ã™ã€‚</p>
            
            <div class="success">
                <strong>âœ… æˆåŠŸåŸºæº–:</strong><br>
                <div style="margin-top: 10px;">
                    <label><input type="checkbox" id="check-basic"> åŸºæœ¬ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡æˆåŠŸ</label><br>
                    <label><input type="checkbox" id="check-detailed"> è©³ç´°ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡æˆåŠŸ</label><br>
                    <label><input type="checkbox" id="check-continuous"> é€£ç¶šã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡æˆåŠŸ</label><br>
                    <label><input type="checkbox" id="check-network"> Networkã‚¿ãƒ–ã§collectãƒªã‚¯ã‚¨ã‚¹ãƒˆç¢ºèª</label><br>
                    <label><input type="checkbox" id="check-realtime"> GA4ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¬ãƒãƒ¼ãƒˆã§ã‚¤ãƒ™ãƒ³ãƒˆå¢—åŠ ç¢ºèª</label><br>
                    <label><input type="checkbox" id="check-diagnostic"> è¨ºæ–­ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡ŒæˆåŠŸ</label><br>
                </div>
            </div>
            
            <button onclick="generateEventTestReport()">ğŸ“‹ ã‚¤ãƒ™ãƒ³ãƒˆãƒ†ã‚¹ãƒˆçµæœãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆ</button>
        </div>

        <div id="report" style="display: none;">
            <div class="step">
                <h2>ğŸ“Š æ‰‹å‹•ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ãƒ†ã‚¹ãƒˆçµæœ</h2>
                <div id="reportContent"></div>
            </div>
        </div>
    </div>

    <script>
        // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—è¡¨ç¤º
        document.getElementById('timestamp').textContent = new Date().toLocaleString('ja-JP');

        function openSiteForEventTest() {
            console.log('ğŸŒ TOYAMA BLOGã‚’æ–°ã—ã„ã‚¿ãƒ–ã§é–‹ã„ã¦ã„ã¾ã™...');
            const siteWindow = window.open('https://sasakiyoshimasa.com', '_blank', 'width=1200,height=800');
            
            if (siteWindow) {
                alert('âœ… TOYAMA BLOGã‚’æ–°ã—ã„ã‚¿ãƒ–ã§é–‹ãã¾ã—ãŸï¼\n\næ¬¡ã®æ‰‹é †:\n1. æ–°ã—ã„ã‚¿ãƒ–ã§F12ã‚’æŠ¼ã—ã¦DevToolsã‚’é–‹ã\n2. Consoleã‚¿ãƒ–ã‚’é¸æŠ\n3. ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã¦å®Ÿè¡Œ\n4. Networkã‚¿ãƒ–ã§collectãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç¢ºèª');
            } else {
                alert('âŒ ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã—ãŸã€‚\nãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã§ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’è¨±å¯ã—ã¦ãã ã•ã„ã€‚');
            }
        }

        function copyBasicEventScript() {
            const script = `// åŸºæœ¬ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ãƒ†ã‚¹ãƒˆ
if (typeof window.gtag === 'function') {
    console.log('ğŸ¯ åŸºæœ¬ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ãƒ†ã‚¹ãƒˆé–‹å§‹');
    
    // ã‚·ãƒ³ãƒ—ãƒ«ãªã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆ
    window.gtag('event', 'test_button_click', {
        event_category: 'engagement',
        event_label: 'manual_test_basic',
        value: 1
    });
    
    console.log('âœ… åŸºæœ¬ã‚¤ãƒ™ãƒ³ãƒˆã‚’é€ä¿¡ã—ã¾ã—ãŸ');
    console.log('ğŸ’¡ Networkã‚¿ãƒ–ã§collectãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç¢ºèªã—ã¦ãã ã•ã„');
} else {
    console.log('âŒ gtagé–¢æ•°ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“');
}`;
            
            copyToClipboard(script, 'åŸºæœ¬ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ');
        }

        function copyDetailedEventScript() {
            const script = `// è©³ç´°ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ãƒ†ã‚¹ãƒˆ
if (typeof window.gtag === 'function') {
    console.log('ğŸ“Š è©³ç´°ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ãƒ†ã‚¹ãƒˆé–‹å§‹');
    
    const timestamp = Date.now();
    
    // è©³ç´°ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä»˜ãã‚¤ãƒ™ãƒ³ãƒˆ
    window.gtag('event', 'detailed_interaction', {
        event_category: 'user_engagement',
        event_label: \`manual_test_detailed_\${timestamp}\`,
        value: 5,
        custom_parameter_1: 'console_test',
        custom_parameter_2: 'detailed_verification',
        test_timestamp: timestamp,
        user_action: 'manual_event_test'
    });
    
    console.log('âœ… è©³ç´°ã‚¤ãƒ™ãƒ³ãƒˆã‚’é€ä¿¡ã—ã¾ã—ãŸ');
    console.log(\`ğŸ“Š ã‚¤ãƒ™ãƒ³ãƒˆID: detailed_interaction_\${timestamp}\`);
    console.log('ğŸ’¡ GA4ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¬ãƒãƒ¼ãƒˆã§ç¢ºèªã—ã¦ãã ã•ã„');
} else {
    console.log('âŒ gtagé–¢æ•°ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“');
}`;
            
            copyToClipboard(script, 'è©³ç´°ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ');
        }

        function copyContinuousEventScript() {
            const script = `// é€£ç¶šã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ãƒ†ã‚¹ãƒˆ
if (typeof window.gtag === 'function') {
    console.log('ğŸ”„ é€£ç¶šã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ãƒ†ã‚¹ãƒˆé–‹å§‹');
    
    const events = [
        { name: 'page_scroll', category: 'engagement', label: 'scroll_test' },
        { name: 'content_view', category: 'content', label: 'article_view' },
        { name: 'user_interaction', category: 'engagement', label: 'click_test' },
        { name: 'custom_conversion', category: 'conversion', label: 'test_conversion' }
    ];
    
    events.forEach((event, index) => {
        setTimeout(() => {
            window.gtag('event', event.name, {
                event_category: event.category,
                event_label: \`\${event.label}_\${index + 1}\`,
                value: index + 1,
                test_sequence: index + 1,
                batch_id: 'continuous_test_' + Date.now()
            });
            console.log(\`âœ… ã‚¤ãƒ™ãƒ³ãƒˆ\${index + 1}/\${events.length}: \${event.name} ã‚’é€ä¿¡\`);
        }, index * 1000); // 1ç§’é–“éš”ã§é€ä¿¡
    });
    
    console.log('ğŸš€ 4ã¤ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’1ç§’é–“éš”ã§é€ä¿¡é–‹å§‹');
    console.log('ğŸ’¡ 4ç§’å¾Œã«å®Œäº†äºˆå®šã§ã™');
} else {
    console.log('âŒ gtagé–¢æ•°ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“');
}`;
            
            copyToClipboard(script, 'é€£ç¶šã‚¤ãƒ™ãƒ³ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ');
        }

        function copyDiagnosticScript() {
            const script = `// GA4ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡è¨ºæ–­
console.log('ğŸ” GA4ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡è¨ºæ–­é–‹å§‹');

// 1. gtagé–¢æ•°ç¢ºèª
if (typeof window.gtag === 'function') {
    console.log('âœ… gtagé–¢æ•°: åˆ©ç”¨å¯èƒ½');
    
    // 2. dataLayerç¢ºèª
    if (Array.isArray(window.dataLayer)) {
        console.log(\`âœ… dataLayer: \${window.dataLayer.length}å€‹ã®è¦ç´ \`);
        
        // 3. æ¸¬å®šIDç¢ºèª
        const hasGA4 = window.dataLayer.some(item => 
            Array.isArray(item) && item.includes('G-5VS8BF91VH')
        );
        console.log(\`\${hasGA4 ? 'âœ…' : 'âŒ'} æ¸¬å®šID G-5VS8BF91VH: \${hasGA4 ? 'ç¢ºèªæ¸ˆã¿' : 'æœªç¢ºèª'}\`);
        
        // 4. ãƒ†ã‚¹ãƒˆã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡
        console.log('ğŸ§ª è¨ºæ–­ç”¨ãƒ†ã‚¹ãƒˆã‚¤ãƒ™ãƒ³ãƒˆã‚’é€ä¿¡...');
        window.gtag('event', 'diagnostic_test', {
            event_category: 'troubleshooting',
            event_label: 'diagnostic_event',
            diagnostic_timestamp: Date.now()
        });
        console.log('âœ… è¨ºæ–­ç”¨ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡å®Œäº†');
        
    } else {
        console.log('âŒ dataLayer: åˆ©ç”¨ä¸å¯');
    }
} else {
    console.log('âŒ gtagé–¢æ•°: åˆ©ç”¨ä¸å¯');
    console.log('ğŸ’¡ ãƒšãƒ¼ã‚¸ãŒå®Œå…¨ã«èª­ã¿è¾¼ã¾ã‚Œã¦ã„ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™');
}

console.log('ğŸ” è¨ºæ–­å®Œäº†');`;
            
            copyToClipboard(script, 'è¨ºæ–­ã‚¹ã‚¯ãƒªãƒ—ãƒˆ');
        }

        function copyToClipboard(text, name) {
            navigator.clipboard.writeText(text).then(() => {
                alert(`âœ… ${name}ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼\n\nTOYAMA BLOGã®DevTools Consoleã«è²¼ã‚Šä»˜ã‘ã¦å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚`);
            }).catch(err => {
                console.error('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—:', err);
                alert('ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã¸ã®ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ‰‹å‹•ã§ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚');
            });
        }

        function openGA4Events() {
            const eventsUrl = 'https://analytics.google.com/analytics/web/#/p498053318/reports/explorer?params=_u..nav%3Dmaui%26_u.comparisonOption%3Ddisabled%26_u.date00%3D20250101%26_u.date01%3D20251231&r=events-overview';
            window.open(eventsUrl, '_blank');
        }

        function openGA4Realtime() {
            const realtimeUrl = 'https://analytics.google.com/analytics/web/#/p498053318/realtime/overview';
            window.open(realtimeUrl, '_blank');
        }

        function generateEventTestReport() {
            const now = new Date().toLocaleString('ja-JP');
            const checks = [
                { id: 'check-basic', label: 'åŸºæœ¬ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡æˆåŠŸ' },
                { id: 'check-detailed', label: 'è©³ç´°ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡æˆåŠŸ' },
                { id: 'check-continuous', label: 'é€£ç¶šã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡æˆåŠŸ' },
                { id: 'check-network', label: 'Networkã‚¿ãƒ–ã§collectãƒªã‚¯ã‚¨ã‚¹ãƒˆç¢ºèª' },
                { id: 'check-realtime', label: 'GA4ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¬ãƒãƒ¼ãƒˆã§ã‚¤ãƒ™ãƒ³ãƒˆå¢—åŠ ç¢ºèª' },
                { id: 'check-diagnostic', label: 'è¨ºæ–­ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡ŒæˆåŠŸ' }
            ];
            
            let completed = 0;
            let checkHTML = '';
            
            checks.forEach(check => {
                const isChecked = document.getElementById(check.id).checked;
                if (isChecked) completed++;
                const status = isChecked ? 'âœ…' : 'âŒ';
                checkHTML += `<p>${status} ${check.label}</p>`;
            });
            
            const successRate = Math.round((completed / checks.length) * 100);
            const overallStatus = successRate >= 80 ? 'ğŸ‰ æˆåŠŸ' : successRate >= 60 ? 'âš ï¸ éƒ¨åˆ†çš„æˆåŠŸ' : 'âŒ è¦æ”¹å–„';
            
            const reportContent = `
                <div class="success">
                    <h3>ğŸ¯ æ‰‹å‹•ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ãƒ†ã‚¹ãƒˆçµæœ</h3>
                    <p><strong>ãƒ†ã‚¹ãƒˆå®Ÿæ–½æ—¥æ™‚:</strong> ${now}</p>
                    <p><strong>æ¸¬å®šID:</strong> G-5VS8BF91VH</p>
                    <p><strong>å¯¾è±¡ã‚µã‚¤ãƒˆ:</strong> https://sasakiyoshimasa.com</p>
                    <p><strong>ç·åˆè©•ä¾¡:</strong> ${overallStatus} (${successRate}%)</p>
                    <p><strong>å®Œäº†é …ç›®:</strong> ${completed}/${checks.length}</p>
                    
                    <h4>ğŸ“‹ ãƒ†ã‚¹ãƒˆçµæœè©³ç´°</h4>
                    ${checkHTML}
                    
                    <h4>ğŸ‰ çµè«–</h4>
                    <p>${successRate >= 80 ? 
                        '<strong style="color: #28a745;">GA4ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ã¯æ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã™ï¼</strong><br>å…¨ã¦ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—ãŒæ­£ã—ãé€ä¿¡ã•ã‚Œã€GA4ã§è¨˜éŒ²ã•ã‚Œã¦ã„ã¾ã™ã€‚' : 
                        successRate >= 60 ?
                        '<strong style="color: #ffc107;">åŸºæœ¬çš„ãªã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ã¯å‹•ä½œã—ã¦ã„ã¾ã™ãŒã€ä¸€éƒ¨æ”¹å–„ãŒå¿…è¦ã§ã™ã€‚</strong><br>æœªå®Œäº†ã®é …ç›®ã«ã¤ã„ã¦å†åº¦ç¢ºèªã—ã¦ãã ã•ã„ã€‚' :
                        '<strong style="color: #dc3545;">ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ã«å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚</strong><br>GA4ã®å®Ÿè£…ç¢ºèªãŒå¿…è¦ã§ã™ã€‚'
                    }</p>
                    
                    <h4>ğŸ“ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</h4>
                    <p>${successRate >= 80 ? 
                        'GA4å®Ÿè£…ã¯å®Œå…¨ã«æˆåŠŸã—ã¦ã„ã¾ã™ã€‚ç¶™ç¶šçš„ãªç›£è¦–ã¨ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã®æ´»ç”¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚' :
                        'æœªå®Œäº†ã®é …ç›®ã«ã¤ã„ã¦ã€DevToolsã§ã®è©³ç´°ç¢ºèªã¨GA4è¨­å®šã®è¦‹ç›´ã—ã‚’è¡Œã£ã¦ãã ã•ã„ã€‚'
                    }</p>
                    
                    <h4>ğŸ”— å‚è€ƒãƒªãƒ³ã‚¯</h4>
                    <p><a href="https://analytics.google.com/analytics/web/#/p498053318/realtime/overview" target="_blank">GA4ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¬ãƒãƒ¼ãƒˆ</a></p>
                    <p><a href="https://analytics.google.com/analytics/web/#/p498053318/reports/explorer" target="_blank">GA4ã‚¤ãƒ™ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆ</a></p>
                </div>
            `;
            
            document.getElementById('reportContent').innerHTML = reportContent;
            document.getElementById('report').style.display = 'block';
            document.getElementById('report').scrollIntoView({ behavior: 'smooth' });
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®æ¡ˆå†…
        window.onload = () => {
            console.log('ğŸ¯ æ‰‹å‹•ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«ã‚’é–‹å§‹ã—ã¾ã—ãŸ');
            console.log('æ‰‹é †ã«å¾“ã£ã¦ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã®é€ä¿¡ãƒ†ã‚¹ãƒˆã‚’è¡Œã£ã¦ãã ã•ã„');
        };
    </script>
</body>
</html>