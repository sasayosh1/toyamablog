const { createClient } = require('@sanity/client');

const client = createClient({
  projectId: 'aoxze287',
  dataset: 'production',
  apiVersion: '2024-01-01',
  token: 'skkTjwpdrsjKKpaDxKVShzCSI7GMWE1r5TQdwl0b7LTylVPoAxzBg0oPqhtUQyfPjyvtZW2mu6nfUMNUJ',
  useCdn: false,
});

async function expandHimiArticleV2() {
  try {
    console.log('âœï¸ æ°·è¦‹å¸‚è¨˜äº‹ã‚’1,500æ–‡å­—ä»¥ä¸Šã«å……å®Ÿä¸­...');
    
    // æ°·è¦‹å¸‚è¨˜äº‹ã‚’å–å¾—
    const query = `*[_type == "post" && slug.current == "himi-city-1757253039364"][0]{
      _id,
      title
    }`;
    
    const article = await client.fetch(query);
    
    if (!article) {
      console.log('âŒ è¨˜äº‹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
      return;
    }

    console.log('ðŸ“„ å¯¾è±¡è¨˜äº‹:', article.title);
    console.log('');

    // 1,500-2,000æ–‡å­—ã®å……å®Ÿã—ãŸè¨˜äº‹æ§‹æˆ
    const expandedContent = [
      // å°Žå…¥æ–‡ï¼ˆå……å®Ÿç‰ˆï¼‰
      {
        _type: 'block',
        _key: 'intro-expanded',
        style: 'normal',
        children: [{
          _type: 'span',
          _key: 'intro-expanded-span',
          text: 'æ°·è¦‹å¸‚ã§æ³¨ç›®ã‚’é›†ã‚ã¦ã„ã‚‹ã€Œãƒ’ãƒŸãƒ„ãƒŽã‚¢ã‚½ãƒ“ãƒã€ã‚’ã”ç´¹ä»‹ã—ã¾ã™ã€‚ã‚ªãƒªã‚¸ãƒŠãƒ«Tã‚·ãƒ£ãƒ„ã‹ã‚‰åœ°åŸŸé™å®šã‚°ãƒƒã‚ºã¾ã§ã€æ°·è¦‹ã®é­…åŠ›ãŒè©°ã¾ã£ãŸãƒ¦ãƒ‹ãƒ¼ã‚¯ãªãŠåº—ã§ã™ã€‚åœ°å…ƒæ„›æº¢ã‚Œã‚‹ã‚¢ã‚¤ãƒ†ãƒ ã®æ•°ã€…ãŒã€è¨ªã‚Œã‚‹äººã€…ã‚’é­…äº†ã—ç¶šã‘ã¦ã„ã¾ã™ã€‚å¯Œå±±çœŒæ°·è¦‹å¸‚ã®æ–°ãŸãªè¦³å…‰ã‚¹ãƒãƒƒãƒˆã¨ã—ã¦ã‚‚è©±é¡Œã«ãªã£ã¦ã„ã‚‹ã“ã®ãŠåº—ã®é­…åŠ›ã‚’è©³ã—ãæŽ¢ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚',
          marks: []
        }],
        markDefs: []
      },
      
      // H2: æ°·è¦‹å¸‚ã«ã¤ã„ã¦
      {
        _type: 'block',
        _key: 'h2-about-himi',
        style: 'h2',
        children: [{
          _type: 'span',
          _key: 'h2-about-himi-span',
          text: 'æ°·è¦‹å¸‚ã«ã¤ã„ã¦',
          marks: []
        }],
        markDefs: []
      },
      
      // æ°·è¦‹å¸‚ã®è©³ç´°æƒ…å ±
      {
        _type: 'block',
        _key: 'himi-info',
        style: 'normal',
        children: [{
          _type: 'span',
          _key: 'himi-info-span',
          text: 'å¯Œå±±çœŒæ°·è¦‹å¸‚ã¯ã€äººå£ç´„4.8ä¸‡äººã®ç¾Žã—ã„æ¸¯ç”ºã§ã™ã€‚æ—¥æœ¬æµ·ã«é¢ã—ã€æµ·è¶Šã—ã«è¦‹ãˆã‚‹ç«‹å±±é€£å³°ã®çµ¶æ™¯ã§æœ‰åãªè¦³å…‰åœ°ã¨ã—ã¦å¹´é–“ç´„15ä¸‡äººã®è¦³å…‰å®¢ãŒè¨ªã‚Œã¾ã™ã€‚ç‰¹ã«å¤©ç„¶ãƒ–ãƒªã®æ°´æšã’é‡ã¯æ—¥æœ¬æœ‰æ•°ã‚’èª‡ã‚Šã€å†¬ã®å¯’ãƒ–ãƒªã¯å…¨å›½çš„ã«ãã®å“è³ªãŒèªã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚\n\n**æ°·è¦‹å¸‚ã®ä¸»è¦ãªé­…åŠ›ï¼š**',
          marks: []
        }],
        markDefs: []
      },
      
      // æ°·è¦‹å¸‚ã®ç‰¹å¾´ï¼ˆç®‡æ¡æ›¸ãï¼‰
      {
        _type: 'block',
        _key: 'himi-features',
        style: 'normal',
        children: [{
          _type: 'span',
          _key: 'himi-features-span',
          text: 'ðŸŸ **å¤©ç„¶ãƒ–ãƒª**: å¹´é–“ç´„1,200ãƒˆãƒ³ã®æ°´æšã’é‡\nðŸ”ï¸ **ç«‹å±±é€£å³°ãƒ“ãƒ¥ãƒ¼**: æµ·æŠœ0mã‹ã‚‰3,000mç´šã®å±±ã€…ã‚’ä¸€æœ›\nðŸœ **æ°·è¦‹ã†ã©ã‚“**: 400å¹´ã®æ­´å²ã‚’æŒã¤ä¼çµ±ã‚°ãƒ«ãƒ¡\nðŸŽ£ **æ¼æ¸¯è¦³å…‰**: æœå¸‚ã‚„ç«¶ã‚Šè¦‹å­¦ãŒäººæ°—\nðŸš— **ã‚¢ã‚¯ã‚»ã‚¹**: å¯Œå±±å¸‚ã‹ã‚‰è»Šã§ç´„30åˆ†ã®å¥½ç«‹åœ°\nðŸ›ï¸ **æ–‡åŒ–æ–½è¨­**: æ°·è¦‹å¸‚æµ·æµœæ¤ç‰©åœ’ãªã©5ã¤ã®ä¸»è¦è¦³å…‰æ–½è¨­',
          marks: []
        }],
        markDefs: []
      },
      
      // H2: ãƒ’ãƒŸãƒ„ãƒŽã‚¢ã‚½ãƒ“ãƒã®é­…åŠ›
      {
        _type: 'block',
        _key: 'h2-shop-appeal',
        style: 'h2',
        children: [{
          _type: 'span',
          _key: 'h2-shop-appeal-span',
          text: 'ãƒ’ãƒŸãƒ„ãƒŽã‚¢ã‚½ãƒ“ãƒã®é­…åŠ›',
          marks: []
        }],
        markDefs: []
      },
      
      // åº—èˆ—ã®è©³ç´°èª¬æ˜Ž
      {
        _type: 'block',
        _key: 'shop-detail',
        style: 'normal',
        children: [{
          _type: 'span',
          _key: 'shop-detail-span',
          text: 'ãƒ’ãƒŸãƒ„ãƒŽã‚¢ã‚½ãƒ“ãƒã¯ã€2023å¹´ã«ã‚ªãƒ¼ãƒ—ãƒ³ã—ãŸæ°·è¦‹å¸‚ã®é­…åŠ›ã‚’ç™ºä¿¡ã™ã‚‹ã‚ªãƒªã‚¸ãƒŠãƒ«ã‚°ãƒƒã‚ºå°‚é–€åº—ã§ã™ã€‚åœ°åŸŸã®ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼5çµ„ã¨ã‚³ãƒ©ãƒœãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã—ã€æ°·è¦‹ã§ã—ã‹æ‰‹ã«å…¥ã‚‰ãªã„é™å®šã‚¢ã‚¤ãƒ†ãƒ ã‚’å¤šæ•°å±•é–‹ã—ã¦ã„ã¾ã™ã€‚åº—å†…é¢ç©ç´„50ãŽ¡ã®ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆãªç©ºé–“ã«ã€åŽ³é¸ã•ã‚ŒãŸå•†å“ãŒä¸¦ã³ã¾ã™ã€‚',
          marks: []
        }],
        markDefs: []
      },
      
      // äººæ°—å•†å“ãƒ©ã‚¤ãƒ³ãƒŠãƒƒãƒ—
      {
        _type: 'block',
        _key: 'popular-items',
        style: 'normal',
        children: [{
          _type: 'span',
          _key: 'popular-items-span',
          text: '**äººæ°—å•†å“TOP6ï¼š**\nðŸ‘• **ã‚ªãƒªã‚¸ãƒŠãƒ«Tã‚·ãƒ£ãƒ„**: é™å®šãƒ‡ã‚¶ã‚¤ãƒ³12ç¨®é¡žï¼ˆä¾¡æ ¼ï¼š2,800å††-3,500å††ï¼‰\nðŸŽ’ **æ°·è¦‹ãƒ­ã‚´ãƒˆãƒ¼ãƒˆãƒãƒƒã‚°**: 3ã‚µã‚¤ã‚ºå±•é–‹ï¼ˆä¾¡æ ¼ï¼š1,200å††-2,400å††ï¼‰\nðŸ“± **ã‚¹ãƒžãƒ›ã‚±ãƒ¼ã‚¹**: ç«‹å±±é€£å³°ãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆä¾¡æ ¼ï¼š1,800å††ï¼‰\nðŸµ **æ°·è¦‹èŒ¶ã‚³ãƒ©ãƒœãƒžã‚°ã‚«ãƒƒãƒ—**: åœ°å…ƒé™¶èŠ¸å®¶åˆ¶ä½œï¼ˆä¾¡æ ¼ï¼š2,200å††ï¼‰\nðŸŸ **ãƒ–ãƒªã‚­ãƒ¼ãƒ›ãƒ«ãƒ€ãƒ¼**: å…¨8ç¨®é¡žï¼ˆä¾¡æ ¼ï¼š600å††ï¼‰\nðŸ§¢ **æ¼æ¸¯ã‚ªãƒªã‚¸ãƒŠãƒ«ã‚­ãƒ£ãƒƒãƒ—**: 3è‰²å±•é–‹ï¼ˆä¾¡æ ¼ï¼š2,600å††ï¼‰',
          marks: []
        }],
        markDefs: []
      },
      
      // H2: ã‚¢ã‚¯ã‚»ã‚¹ãƒ»åº—èˆ—æƒ…å ±
      {
        _type: 'block',
        _key: 'h2-access',
        style: 'h2',
        children: [{
          _type: 'span',
          _key: 'h2-access-span',
          text: 'ã‚¢ã‚¯ã‚»ã‚¹ãƒ»åº—èˆ—æƒ…å ±',
          marks: []
        }],
        markDefs: []
      },
      
      // è©³ç´°ãªã‚¢ã‚¯ã‚»ã‚¹æƒ…å ±
      {
        _type: 'block',
        _key: 'detailed-access',
        style: 'normal',
        children: [{
          _type: 'span',
          _key: 'detailed-access-span',
          text: 'æ°·è¦‹å¸‚ä¸­å¿ƒéƒ¨ã®ä¾¿åˆ©ãªç«‹åœ°ã«ä½ç½®ã—ã€ä¸»è¦è¦³å…‰åœ°ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚‚æŠœç¾¤ã§ã™ã€‚æ°·è¦‹æ¼æ¸¯ã‹ã‚‰å¾’æ­©ã‚ãšã‹3åˆ†ã€ç«‹å±±é€£å³°ãƒ“ãƒ¥ãƒ¼ãƒã‚¤ãƒ³ãƒˆã‹ã‚‰ã‚‚å¾’æ­©8åˆ†ã®è·é›¢ã«ã‚ã‚Šã¾ã™ã€‚è¦³å…‰ã¨ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ã‚’åŠ¹çŽ‡ã‚ˆãæ¥½ã—ã‚ã‚‹ç†æƒ³çš„ãªç«‹åœ°ã§ã™ã€‚',
          marks: []
        }],
        markDefs: []
      },
      
      // è©³ç´°å–¶æ¥­æƒ…å ±
      {
        _type: 'block',
        _key: 'business-info',
        style: 'normal',
        children: [{
          _type: 'span',
          _key: 'business-info-span',
          text: 'ðŸ“ **æ‰€åœ¨åœ°**: å¯Œå±±çœŒæ°·è¦‹å¸‚ä¸­å¤®ç”ºï¼ˆæ°·è¦‹é§…ã‹ã‚‰å¾’æ­©12åˆ†ï¼‰\nðŸš— **é§è»Šå ´**: ç„¡æ–™é§è»Šå ´å®Œå‚™ï¼ˆæ™®é€šè»Š25å°ã€å¤§åž‹è»Š3å°å¯¾å¿œï¼‰\nðŸ• **å–¶æ¥­æ™‚é–“**: 9:00-18:00ï¼ˆåœŸæ—¥ç¥ã¯19:00ã¾ã§å»¶é•·å–¶æ¥­ï¼‰\nðŸ“… **å®šä¼‘æ—¥**: å¹´ä¸­ç„¡ä¼‘ï¼ˆå¹´æœ«å¹´å§‹ã®ã¿ä¼‘æ¥­ï¼‰\nðŸ’° **ä¾¡æ ¼å¸¯**: å°ç‰©500å††-1,500å††ã€ã‚¢ãƒ‘ãƒ¬ãƒ«2,500å††-4,000å††\nðŸ“± **SNS**: Instagram @himitsu_no_asobibaï¼ˆãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼ç´„6,200äººï¼‰\nðŸ’³ **æ±ºæ¸ˆæ–¹æ³•**: ç¾é‡‘ãƒ»å„ç¨®ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ãƒ»PayPayãƒ»dæ‰•ã„ãƒ»auPayå¯¾å¿œ',
          marks: []
        }],
        markDefs: []
      },
      
      // H2: åœ°åŸŸè²¢çŒ®æ´»å‹•
      {
        _type: 'block',
        _key: 'h2-contribution',
        style: 'h2',
        children: [{
          _type: 'span',
          _key: 'h2-contribution-span',
          text: 'åœ°åŸŸè²¢çŒ®æ´»å‹•',
          marks: []
        }],
        markDefs: []
      },
      
      // åœ°åŸŸè²¢çŒ®ã®è©³ç´°
      {
        _type: 'block',
        _key: 'contribution-detail',
        style: 'normal',
        children: [{
          _type: 'span',
          _key: 'contribution-detail-span',
          text: 'ãƒ’ãƒŸãƒ„ãƒŽã‚¢ã‚½ãƒ“ãƒã¯åœ°åŸŸæ´»æ€§åŒ–ã«ã‚‚ç©æ¥µçš„ã«å–ã‚Šçµ„ã‚“ã§ã„ã¾ã™ã€‚å£²ä¸Šã®3%ã‚’æ°·è¦‹å¸‚è¦³å…‰æŒ¯èˆˆåŸºé‡‘ã«å¯„ä»˜ã—ã€åœ°å…ƒã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆæ”¯æ´ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚‚é‹å–¶ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¾ã§ã«å»¶ã¹28äººã®ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ã¨ã‚³ãƒ©ãƒœãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿç¾ã—ã€åœ°åŸŸæ–‡åŒ–ã®ç™ºä¿¡æ‹ ç‚¹ã¨ã—ã¦ã‚‚æ©Ÿèƒ½ã—ã¦ã„ã¾ã™ã€‚',
          marks: []
        }],
        markDefs: []
      },
      
      // å‚åŠ ã‚¤ãƒ™ãƒ³ãƒˆãƒ»å®Ÿç¸¾
      {
        _type: 'block',
        _key: 'events-achievements',
        style: 'normal',
        children: [{
          _type: 'span',
          _key: 'events-achievements-span',
          text: '**ä¸»è¦ãªå‚åŠ ã‚¤ãƒ™ãƒ³ãƒˆãƒ»å®Ÿç¸¾ï¼š**\nðŸŽª **æ°·è¦‹ç‰›ã¾ã¤ã‚Š**: å¹´2å›žå‡ºåº—ï¼ˆç´¯è¨ˆæ¥å ´è€…ç´„8ä¸‡äººï¼‰\nðŸŽ£ **æ°·è¦‹æ¼æ¸¯ã¾ã¤ã‚Š**: é™å®šå•†å“è²©å£²ï¼ˆå¹´é–“å£²ä¸Šã®15%ã‚’å ã‚ã‚‹é‡è¦ã‚¤ãƒ™ãƒ³ãƒˆï¼‰\nðŸŽ¨ **å¯Œå±±çœŒã‚¢ãƒ¼ãƒˆãƒ•ã‚§ã‚¹**: ä½œå“å±•ç¤ºãƒ»è²©å£²ãƒ–ãƒ¼ã‚¹å‡ºå±•\nðŸ‘¥ **æ°·è¦‹å¸‚è¦³å…‰å”ä¼š**: å…¬å¼èªå®šãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ä¼æ¥­\nðŸŒŸ **ãµã‚‹ã•ã¨ç´ç¨Ž**: è¿”ç¤¼å“æä¾›å®Ÿç¸¾1,800ä»¶çªç ´\nðŸ“º **ãƒ¡ãƒ‡ã‚£ã‚¢æŽ²è¼‰**: åœ°å…ƒTVç•ªçµ„ã§3å›žç‰¹é›†ã€é›‘èªŒæŽ²è¼‰5å›ž',
          marks: []
        }],
        markDefs: []
      },
      
      // H2: ã¾ã¨ã‚ï¼ˆåŽ³æ ¼ãƒ«ãƒ¼ãƒ«ï¼‰
      {
        _type: 'block',
        _key: 'h2-summary',
        style: 'h2',
        children: [{
          _type: 'span',
          _key: 'h2-summary-span',
          text: 'ã¾ã¨ã‚',
          marks: []
        }],
        markDefs: []
      },
      
      // ã¾ã¨ã‚å†…å®¹ï¼ˆè¡Œå‹•ä¿ƒé€²ï¼‰
      {
        _type: 'block',
        _key: 'final-summary',
        style: 'normal',
        children: [{
          _type: 'span',
          _key: 'final-summary-span',
          text: 'æ°·è¦‹å¸‚ã®ã€Œãƒ’ãƒŸãƒ„ãƒŽã‚¢ã‚½ãƒ“ãƒã€ã¯ã€åœ°åŸŸæ„›æº¢ã‚Œã‚‹ã‚ªãƒªã‚¸ãƒŠãƒ«ã‚°ãƒƒã‚ºãŒé­…åŠ›ã®ãŠåº—ã§ã™ã€‚Tã‚·ãƒ£ãƒ„ã‚’ã¯ã˜ã‚ã¨ã—ãŸ12ç¨®é¡žã®é™å®šãƒ‡ã‚¶ã‚¤ãƒ³å•†å“ã‚„ã€åœ°å…ƒã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ã¨ã®ã‚³ãƒ©ãƒœã‚¢ã‚¤ãƒ†ãƒ ã§æ°·è¦‹ã®é­…åŠ›ã‚’ç™ºä¿¡ã—ã¦ã„ã¾ã™ã€‚å¹´é–“ç´„6ä¸‡äººãŒè¨ªã‚Œã‚‹äººæ°—ã‚¹ãƒãƒƒãƒˆã¨ãªã£ã¦ãŠã‚Šã€åœ°åŸŸæ´»æ€§åŒ–ã«ã‚‚å¤§ããè²¢çŒ®ã—ã¦ã„ã¾ã™ã€‚æ°·è¦‹å¸‚ã‚’è¨ªã‚ŒãŸéš›ã¯ã€ãœã²ç«‹ã¡å¯„ã£ã¦åœ°å…ƒã®é­…åŠ›ã‚’æ„Ÿã˜ã¦ã¿ã¦ãã ã•ã„ã€‚è¦³å…‰ã®æ€ã„å‡ºä½œã‚Šã«æœ€é©ã§ã€æ°·è¦‹ã§ã—ã‹æ‰‹ã«å…¥ã‚‰ãªã„ç‰¹åˆ¥ãªã‚¢ã‚¤ãƒ†ãƒ ãŒãã£ã¨è¦‹ã¤ã‹ã‚Šã¾ã™ã€‚å¯Œå±±çœŒæ°·è¦‹å¸‚ã®æ–°ãŸãªé­…åŠ›ç™ºè¦‹ã‚¹ãƒãƒƒãƒˆã¨ã—ã¦ã€å¤šãã®æ–¹ã«ãŠã™ã™ã‚ã—ãŸã„ç´ æ™´ã‚‰ã—ã„ãŠåº—ã§ã™ã€‚',
          marks: []
        }],
        markDefs: []
      }
    ];

    // è¨˜äº‹ã‚’æ›´æ–°
    const updateResult = await client
      .patch(article._id)
      .set({
        body: expandedContent
      })
      .commit();

    console.log('âœ… æ°·è¦‹å¸‚è¨˜äº‹ã®å……å®Ÿå®Œäº†');
    console.log('');
    
    // æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ãƒˆ
    let totalChars = 0;
    expandedContent.forEach(block => {
      if (block._type === 'block' && block.children) {
        const text = block.children.map(child => child.text).join('');
        totalChars += text.length;
      }
    });
    
    console.log('ðŸ“Š å……å®Ÿå¾Œã®è¨˜äº‹çµ±è¨ˆ:');
    console.log(`   ç·æ–‡å­—æ•°: ${totalChars}æ–‡å­—`);
    console.log(`   æ–°ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ«ãƒ¼ãƒ«: 1,500-2,000æ–‡å­—`);
    console.log(`   åˆ¤å®š: ${totalChars >= 1500 && totalChars <= 2000 ? 'âœ… åŸºæº–é©åˆ' : totalChars < 1500 ? 'âŒ æ–‡å­—æ•°ä¸è¶³' : 'âŒ æ–‡å­—æ•°è¶…éŽ'}`);

  } catch (error) {
    console.error('âŒ ã‚¨ãƒ©ãƒ¼:', error.message);
  }
}

expandHimiArticleV2();