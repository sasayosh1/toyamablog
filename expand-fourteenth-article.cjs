const { createClient } = require('@sanity/client');

const client = createClient({
  projectId: 'aoxze287',
  dataset: 'production',
  apiVersion: '2024-01-01',
  useCdn: false,
  token: process.env.SANITY_API_TOKEN
});

async function expandFourteenthArticle() {
  try {
    console.log('ç¬¬14è¨˜äº‹ã®æ›´æ–°ã‚’é–‹å§‹ã—ã¾ã™...');
    console.log('å¯¾è±¡: nanto-city-2 (äº”ç®‡å±±ç›¸å€‰åˆæŒé€ ã‚Šé›†è½)');
    
    // è¨˜äº‹ã‚’å–å¾—
    const post = await client.fetch('*[_type == "post" && slug.current == "nanto-city-2"][0] { _id, title, body, youtubeUrl }');
    
    if (!post) {
      console.log('è¨˜äº‹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ');
      return;
    }
    
    console.log('è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«:', post.title);
    console.log('YouTube URL:', post.youtubeUrl ? 'ã‚ã‚Š' : 'ãªã—');
    
    // ç¾åœ¨ã®çŠ¶æ…‹ç¢ºèª
    let totalChars = 0;
    post.body.forEach(block => {
      if (block._type === 'block' && block.children) {
        const text = block.children.map(child => child.text).join('');
        totalChars += text.length;
      }
    });
    
    console.log(`ç¾åœ¨ã®æ–‡å­—æ•°: ${totalChars}æ–‡å­—`);
    console.log('ç›®æ¨™: 800-1000æ–‡å­—ã«æ‹¡å¼µ');
    
    // ã‚·ãƒ£ãƒ«ãƒ­ãƒƒãƒ†è¨˜äº‹ã®æ§‹æˆã‚’å‚è€ƒã«ã€äº”ç®‡å±±ç›¸å€‰åˆæŒé€ ã‚Šé›†è½ã®è¨˜äº‹ã‚’æ‹¡å¼µ
    const expandedContent = [
      // å°å…¥æ–‡ï¼ˆç´„90æ–‡å­—ï¼‰
      {
        _type: 'block',
        _key: 'intro',
        style: 'normal',
        children: [{ _type: 'span', text: 'äº”ç®‡å±±ç›¸å€‰åˆæŒé€ ã‚Šé›†è½ã¯ã€ä¸–ç•Œæ–‡åŒ–éºç”£ã«ç™»éŒ²ã•ã‚ŒãŸæ—¥æœ¬ã®ä»£è¡¨çš„ãªå±±æ‘é›†è½ã§ã™ã€‚æ˜”ãªãŒã‚‰ã®åˆæŒé€ ã‚Šã®å®¶å±‹ãŒç¾ã—ã„æ™¯è¦³ã‚’ä½œã‚Šå‡ºã—ã¦ã„ã¾ã™ã€‚', marks: [] }],
        markDefs: []
      },
      
      // H2: ä¸–ç•Œéºç”£ã®ä¾¡å€¤ï¼ˆç´„170æ–‡å­—ï¼‰
      {
        _type: 'block',
        _key: 'h2-world-heritage',
        style: 'h2',
        children: [{ _type: 'span', text: 'ä¸–ç•Œæ–‡åŒ–éºç”£ç›¸å€‰åˆæŒé€ ã‚Šé›†è½', marks: [] }],
        markDefs: []
      },
      {
        _type: 'block',
        _key: 'world-heritage-content',
        style: 'normal',
        children: [{ _type: 'span', text: '1995å¹´ã«ç™½å·éƒ·ã¨å…±ã«ä¸–ç•Œæ–‡åŒ–éºç”£ã«ç™»éŒ²ã•ã‚ŒãŸç›¸å€‰åˆæŒé€ ã‚Šé›†è½ã¯ã€æ—¥æœ¬ã®ä¼çµ±çš„ãªå±±æ‘æ–‡åŒ–ã‚’ç¾åœ¨ã«ä¼ãˆã‚‹è²´é‡ãªæ–‡åŒ–éºç”£ã§ã™ã€‚æ€¥å³»ãªå±±é–“éƒ¨ã«ã‚ã‚ŠãªãŒã‚‰ã€äººã€…ãŒè‡ªç„¶ã¨èª¿å’Œã—ãªãŒã‚‰ç”Ÿæ´»ã—ã¦ããŸçŸ¥æµã¨æŠ€è¡“ãŒå‡ç¸®ã•ã‚Œã¦ã„ã¾ã™ã€‚åˆæŒé€ ã‚Šã®å»ºç¯‰æ§˜å¼ã¯ã€è±ªé›ªåœ°å¸¯ã§ã®ç”Ÿæ´»ã«é©å¿œã—ãŸæ—¥æœ¬ç‹¬ç‰¹ã®å»ºç¯‰æŠ€è¡“ã¨ã—ã¦ã€ä¸–ç•Œçš„ã«ã‚‚é«˜ãè©•ä¾¡ã•ã‚Œã¦ã„ã¾ã™ã€‚ç¾åœ¨ã‚‚ç´„20æ£Ÿã®åˆæŒé€ ã‚Šã®å®¶å±‹ãŒç¾å­˜ã—ã€ãã®å¤šãã§å®Ÿéš›ã«äººã€…ãŒç”Ÿæ´»ã‚’å–¶ã‚“ã§ã„ã¾ã™ã€‚', marks: [] }],
        markDefs: []
      },
      
      // H2: åˆæŒé€ ã‚Šã®å»ºç¯‰ç¾ï¼ˆç´„165æ–‡å­—ï¼‰
      {
        _type: 'block',
        _key: 'h2-architecture',
        style: 'h2',
        children: [{ _type: 'span', text: 'åˆæŒé€ ã‚Šã®å»ºç¯‰æŠ€è¡“ã¨ç¾ã—ã•', marks: [] }],
        markDefs: []
      },
      {
        _type: 'block',
        _key: 'architecture-content',
        style: 'normal',
        children: [{ _type: 'span', text: 'åˆæŒé€ ã‚Šã¯ã€æ‰‹ã®ã²ã‚‰ã‚’åˆã‚ã›ãŸã‚ˆã†ãªæ€¥å‹¾é…ã®èŒ…è‘ºãå±‹æ ¹ãŒç‰¹å¾´çš„ãªå»ºç¯‰æ§˜å¼ã§ã™ã€‚ã“ã®æ§‹é€ ã¯è±ªé›ªã«è€ãˆã‚‹ãŸã‚è€ƒæ¡ˆã•ã‚ŒãŸã‚‚ã®ã§ã€å±‹æ ¹ã®è§’åº¦ã¯ç´„60åº¦ã¨ã„ã†æ€¥å‹¾é…ã«ãªã£ã¦ã„ã¾ã™ã€‚å±‹æ ¹è£ã¯é¤Šèš•æ¥­ã«ä½¿ã‚ã‚Œã¦ãŠã‚Šã€3ï½4éšå»ºã¦ã®æ§‹é€ ã¨ãªã£ã¦ã„ã¾ã™ã€‚é‡˜ã‚’ä¸€æœ¬ã‚‚ä½¿ã‚ãšã€ç¸„ã¨æœ¨çµ„ã¿ã ã‘ã§å»ºã¦ã‚‰ã‚ŒãŸå»ºç‰©ã¯ã€åœ°éœ‡ã«ã‚‚å¼·ã„æŸ”è»Ÿãªæ§‹é€ ã‚’æŒã£ã¦ã„ã¾ã™ã€‚ã“ã®ä¼çµ±çš„ãªå»ºç¯‰æŠ€è¡“ã¯ã€ç¾ä»£ã®å»ºç¯‰å­¦ã«ãŠã„ã¦ã‚‚æ³¨ç›®ã•ã‚Œã‚‹å„ªã‚ŒãŸå·¥æ³•ã§ã™ã€‚', marks: [] }],
        markDefs: []
      },
      
      // H2: å››å­£æŠ˜ã€…ã®æ™¯è¦³ï¼ˆç´„150æ–‡å­—ï¼‰
      {
        _type: 'block',
        _key: 'h2-seasons',
        style: 'h2',
        children: [{ _type: 'span', text: 'å››å­£ãŒå½©ã‚‹é›†è½ã®ç¾ã—ã•', marks: [] }],
        markDefs: []
      },
      {
        _type: 'block',
        _key: 'seasons-content',
        style: 'normal',
        children: [{ _type: 'span', text: 'ç›¸å€‰é›†è½ã¯å››å­£ã‚’é€šã˜ã¦ç•°ãªã‚‹ç¾ã—ã•ã‚’è¦‹ã›ã¦ãã‚Œã¾ã™ã€‚æ˜¥ã¯å±±æ¡œã¨æ–°ç·‘ã«å›²ã¾ã‚ŒãŸåˆæŒé€ ã‚ŠãŒæ¸…ã€…ã—ãã€å¤ã¯æ·±ã„ç·‘ã®ä¸­ã«èŒ…è‘ºãå±‹æ ¹ãŒæ˜ ãˆã¾ã™ã€‚ç§‹ã«ã¯ç´…è‘‰ãŒé›†è½å…¨ä½“ã‚’åŒ…ã¿è¾¼ã¿ã€ã¾ã‚‹ã§çµµç”»ã®ã‚ˆã†ãªæ™¯è¦³ã‚’ä½œã‚Šå‡ºã—ã¾ã™ã€‚å†¬ã¯é›ªåŒ–ç²§ã—ãŸåˆæŒé€ ã‚ŠãŒå¹»æƒ³çš„ãªé¢¨æ™¯ã‚’æ¼”å‡ºã—ã€å¤šãã®å†™çœŸæ„›å¥½å®¶ã‚„è¦³å…‰å®¢ã‚’é­…äº†ã—ã¦ã„ã¾ã™ã€‚ã©ã®å­£ç¯€ã«è¨ªã‚Œã¦ã‚‚ã€æ—¥æœ¬ã®åŸé¢¨æ™¯ã®ç¾ã—ã•ã‚’æ„Ÿã˜ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚', marks: [] }],
        markDefs: []
      },
      
      // H2: ä¼çµ±æ–‡åŒ–ã¨ç”Ÿæ´»ï¼ˆç´„140æ–‡å­—ï¼‰
      {
        _type: 'block',
        _key: 'h2-culture',
        style: 'h2',
        children: [{ _type: 'span', text: 'å±±æ‘ã®ä¼çµ±æ–‡åŒ–ã¨æš®ã‚‰ã—', marks: [] }],
        markDefs: []
      },
      {
        _type: 'block',
        _key: 'culture-content',
        style: 'normal',
        children: [{ _type: 'span', text: 'é›†è½ã§ã¯å¤ãã‹ã‚‰é¤Šèš•æ¥­ã‚„å’Œç´™ä½œã‚Šã€ç‚­ç„¼ããªã©ã®å±±æ‘ç”£æ¥­ãŒå–¶ã¾ã‚Œã¦ãã¾ã—ãŸã€‚å³ã—ã„è‡ªç„¶ç’°å¢ƒã®ä¸­ã§åŸ¹ã‚ã‚ŒãŸå…±åŒä½“æ„è­˜ã¨ç›¸äº’æ‰¶åŠ©ã®ç²¾ç¥ã¯ã€ç¾åœ¨ã§ã‚‚é›†è½ã®äººã€…ã«å—ã‘ç¶™ãŒã‚Œã¦ã„ã¾ã™ã€‚å¹´ä¸­è¡Œäº‹ã‚„ç¥­ã‚Šã‚‚å¤§åˆ‡ã«ä¿å­˜ã•ã‚Œã¦ãŠã‚Šã€è¨ªå•è€…ã¯æ—¥æœ¬ã®å±±æ‘æ–‡åŒ–ã®æœ¬è³ªã‚’ä½“é¨“ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚æ°‘å®¿ã‚„é£Ÿäº‹å‡¦ã§ã¯ã€åœ°å…ƒã®é£Ÿæã‚’ä½¿ã£ãŸéƒ·åœŸæ–™ç†ã‚‚å‘³ã‚ã†ã“ã¨ãŒã§ãã¾ã™ã€‚', marks: [] }],
        markDefs: []
      },
      
      // H2: è¦³å…‰ã®ãƒã‚¤ãƒ³ãƒˆï¼ˆç´„130æ–‡å­—ï¼‰
      {
        _type: 'block',
        _key: 'h2-tourism',
        style: 'h2',
        children: [{ _type: 'span', text: 'é›†è½è¦‹å­¦ã®ãŠã™ã™ã‚ãƒã‚¤ãƒ³ãƒˆ', marks: [] }],
        markDefs: []
      },
      {
        _type: 'block',
        _key: 'tourism-content',
        style: 'normal',
        children: [{ _type: 'span', text: 'é›†è½å†…ã«ã¯è¦‹å­¦ã§ãã‚‹åˆæŒé€ ã‚Šã®æ°‘å®¶ã‚„å±•ç¤ºé¤¨ãŒã‚ã‚Šã€å»ºç¯‰æ§‹é€ ã‚„ç”Ÿæ´»æ§˜å¼ã«ã¤ã„ã¦è©³ã—ãå­¦ã¶ã“ã¨ãŒã§ãã¾ã™ã€‚å±•æœ›å°ã‹ã‚‰ã¯é›†è½å…¨ä½“ã‚’è¦‹æ¸¡ã™ã“ã¨ãŒã§ãã€åˆæŒé€ ã‚Šã®å±‹æ ¹ãŒç¹”ã‚Šãªã™ç¾ã—ã„æ™¯è¦³ã‚’ä¸€æœ›ã§ãã¾ã™ã€‚æ•£ç­–è·¯ã‚‚æ•´å‚™ã•ã‚Œã¦ãŠã‚Šã€ã‚†ã£ãã‚Šã¨é›†è½ã‚’æ­©ããªãŒã‚‰æ­´å²ã¨æ–‡åŒ–ã«è§¦ã‚Œã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãŠåœŸç”£å“ã‚„åœ°å…ƒã®å·¥èŠ¸å“ã‚‚è³¼å…¥ã§ãã¾ã™ã€‚', marks: [] }],
        markDefs: []
      },
      
      // H2: ã¾ã¨ã‚ï¼ˆç´„95æ–‡å­—ï¼‰
      {
        _type: 'block',
        _key: 'h2-summary',
        style: 'h2',
        children: [{ _type: 'span', text: 'ã¾ã¨ã‚', marks: [] }],
        markDefs: []
      },
      {
        _type: 'block',
        _key: 'summary-content',
        style: 'normal',
        children: [{ _type: 'span', text: 'äº”ç®‡å±±ç›¸å€‰åˆæŒé€ ã‚Šé›†è½ã¯ã€æ—¥æœ¬ã®ä¼çµ±çš„ãªå±±æ‘æ–‡åŒ–ã‚’ç¾ä»£ã«ä¼ãˆã‚‹è²´é‡ãªä¸–ç•Œéºç”£ã§ã™ã€‚åˆæŒé€ ã‚Šã®å»ºç¯‰ç¾ã¨å››å­£ã®è‡ªç„¶ãŒç¹”ã‚Šãªã™æ™¯è¦³ã‚’ãœã²ä½“é¨“ã—ã¦ãã ã•ã„ã€‚', marks: [] }],
        markDefs: []
      }
    ];
    
    // æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ãƒˆ
    let newTotalChars = 0;
    expandedContent.forEach(block => {
      if (block._type === 'block' && block.children) {
        const text = block.children.map(child => child.text).join('');
        newTotalChars += text.length;
      }
    });
    
    console.log(`æ–°ã—ã„æ–‡å­—æ•°: ${newTotalChars}æ–‡å­—`);
    console.log('æ–°ã—ã„æ§‹æˆ: H2è¦‹å‡ºã—6å€‹ã®çµ±ä¸€æ§‹é€ ');
    
    // è¨˜äº‹ã‚’æ›´æ–°
    await client
      .patch(post._id)
      .set({ body: expandedContent })
      .commit();
    
    console.log('âœ… ç¬¬14è¨˜äº‹ã®æ›´æ–°ãŒå®Œäº†ã—ã¾ã—ãŸ');
    console.log('ğŸ“‹ å®Ÿéš›ã®æ–‡å­—æ•°â†’' + newTotalChars + 'æ–‡å­—ã«æ‹¡å¼µ');
    console.log('ğŸ—ï¸ H2è¦‹å‡ºã—6å€‹ã®çµ±ä¸€æ§‹é€ ã‚’é©ç”¨');
    
    // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
    await client
      .patch(post._id)
      .set({ _updatedAt: new Date().toISOString() })
      .commit();
    
    console.log('ğŸ”„ ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢å®Ÿè¡Œå®Œäº†');
    
  } catch (error) {
    console.error('âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:', error);
    throw error;
  }
}

expandFourteenthArticle();