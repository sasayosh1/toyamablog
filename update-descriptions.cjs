const { createClient } = require('@sanity/client');

const client = createClient({
  projectId: 'aoxze287',
  dataset: 'production',
  apiVersion: '2024-01-01',
  useCdn: false,
  token: process.env.SANITY_API_TOKEN
});

// å„è¨˜äº‹ã®IDã¨ä½œæˆã—ãŸèª¬æ˜æ–‡ã®ãƒãƒƒãƒ”ãƒ³ã‚°
const descriptionsToUpdate = {
  // 1. ã€å—ç ºå¸‚ã€‘ã†ã•ãæ¨ã—å¿…è¦‹ï¼ã€Œãƒ‘ãƒ†ã‚£ã‚¹ãƒªãƒ¼ã¾ã¡ãªã¿ãƒ©ãƒ‘ãƒ³ã€ãŒå¯æ„›ã™ããŸï¼ #shorts
  '7gNGK9M49tqCuJRraovihd': 'å—ç ºå¸‚ã®ã€Œãƒ‘ãƒ†ã‚£ã‚¹ãƒªãƒ¼ã¾ã¡ãªã¿ãƒ©ãƒ‘ãƒ³ã€ã¯ã€ã†ã•ããƒ¢ãƒãƒ¼ãƒ•ã®å¯æ„›ã„ã‚¹ã‚¤ãƒ¼ãƒ„ãŒè©•åˆ¤ã®ã‚±ãƒ¼ã‚­åº—ã€‚ã†ã•ãå¥½ããªã‚‰å¿…è¦‹ã®åº—å†…è£…é£¾ã¨ã‚ªãƒªã‚¸ãƒŠãƒ«ã‚±ãƒ¼ã‚­ã§ã€åœ°å…ƒã«æ„›ã•ã‚Œã‚‹ç‰¹åˆ¥ãªç©ºé–“ã§ã™ã€‚',

  // 2. ã€å¯Œå±±å¸‚ã€‘è½ã¡ç€ã„ãŸç©ºé–“ã§æ¥½ã—ã‚€ãƒªãƒˆãƒ«ä¸Šæµ·ã®æœ¬æ ¼ä¸­è¯ãƒ©ãƒ³ãƒï¼æ—¥å¸¸ã«ãã£ã¨é«˜ç´šæ„Ÿã‚’ #shorts  
  'OYjzGK4kNO9kmOILcKsUpC': 'å¯Œå±±å¸‚ã®ã€Œãƒªãƒˆãƒ«ä¸Šæµ·ã€ã§å‘³ã‚ã†æœ¬æ ¼ä¸­è¯ãƒ©ãƒ³ãƒã€‚è½ã¡ç€ã„ãŸä¸Šå“ãªåº—å†…ã§ã€åœ°å…ƒé£Ÿæã‚’ä½¿ã£ãŸå¿ƒæ¸©ã¾ã‚‹ä¸­è¯æ–™ç†ã‚’å ªèƒ½ã€‚æ—¥å¸¸ã«é«˜ç´šæ„Ÿã‚’æ·»ãˆã‚‹éš ã‚Œå®¶çš„ãªååº—ã§ã™ã€‚',

  // 3. ã€é«˜å²¡å¸‚ã€‘è„±å‡ºã‚’ä¼(ãã‚ã )ã¦ã‚‹ãƒšãƒ³ã‚®ãƒ³
  'OYjzGK4kNO9kmOILcKsUYU': 'é«˜å²¡å¤åŸå…¬åœ’å‹•ç‰©åœ’ã§è©±é¡Œã®ãƒšãƒ³ã‚®ãƒ³ãŸã¡ã€‚ã¾ã‚‹ã§è„±å‡ºã‚’ä¼ã¦ã¦ã„ã‚‹ã‹ã®ã‚ˆã†ãªæ„›ã‚‰ã—ãã¦è³¢æ˜ãªè¡Œå‹•ãŒäººæ°—ã€‚å€‹æ€§è±Šã‹ãªãƒšãƒ³ã‚®ãƒ³ã¨ã®è§¦ã‚Œåˆã„ã‚’æ¥½ã—ã‚ã¾ã™ã€‚',

  // 4. ã€é­šæ´¥å¸‚ã€‘æ¯æ—¥æš‘ã„ã®ã§ã‚´ãƒãƒ•ã‚¢ã‚¶ãƒ©ã‚·ã‚’è¦‹ã¦æ¶¼ã—ã•ã‚’æ„Ÿã˜ã‚ˆã†ï¼é­šæ´¥æ°´æ—é¤¨ã®ç™’ã—ä½“é¨“
  'jKwgQNCsrs019jNuQGi6pM': 'é­šæ´¥æ°´æ—é¤¨ã®ã‚´ãƒãƒ•ã‚¢ã‚¶ãƒ©ã‚·ã§æš‘ã„å¤ã‚’æ¶¼ã—ãï¼æ°´ä¸­ã‚’å„ªé›…ã«æ³³ãã‚¢ã‚¶ãƒ©ã‚·ãŸã¡ã®ç™’ã—ã®å§¿ã§å¿ƒã‚‚ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³ã€‚æ—¥æœ¬æµ·å´æœ€å¤§ç´šã®æ°´æ—é¤¨ã§ç‰¹åˆ¥ãªæ¶¼ä½“é¨“ã‚’ã€‚',

  // 5. ã€æ°·è¦‹å¸‚ã€‘å‰ãŒã‘ç‰§å ´ã®ãƒ¤ã‚®ãŸã¡ã‹ã‚‰è¦‹ç¿’ã„ãŸã„ã‚¹ãƒ­ãƒ¼ãƒ©ã‚¤ãƒ•ä½“é¨“
  'jKwgQNCsrs019jNuQGXsKO': 'æ°·è¦‹å¸‚ã®å‰ãŒã‘ç‰§å ´ã§ã€ã®ã‚“ã³ã‚Šè‰ã‚’é£Ÿã‚€ãƒ¤ã‚®ãŸã¡ã‹ã‚‰å­¦ã¶ã‚¹ãƒ­ãƒ¼ãƒ©ã‚¤ãƒ•ã€‚ãƒã‚¤ãƒšãƒ¼ã‚¹ãªç‰§å ´ç”Ÿæ´»ã®é­…åŠ›ã¨ã€éƒ½å¸‚éƒ¨ã®å¿™ã—ã•ã‚’å¿˜ã‚Œã•ã›ã‚‹ç™’ã—ã®ä½“é¨“ã‚’ãŠå±Šã‘ã€‚',

  // 6. ã€ç ºæ³¢å¸‚ã€‘ã‚¤ã‚ªãƒ³ãƒ¢ãƒ¼ãƒ«ã¨ãªã¿ã§ã€åŠ‡å ´ç‰ˆã€Œé¬¼æ»…ã®åˆƒã€ç„¡é™åŸç·¨ã€ãƒã‚¹ã‚¿ãƒ¼å±•é–‹å‚¬ä¸­ï¼
  'jKwgQNCsrs019jNuQGXuNc': 'ç ºæ³¢å¸‚ã‚¤ã‚ªãƒ³ãƒ¢ãƒ¼ãƒ«ã¨ãªã¿ã§é–‹å‚¬ã®ã€ŒåŠ‡å ´ç‰ˆã€é¬¼æ»…ã®åˆƒã€ç„¡é™åŸç·¨ã€ãƒã‚¹ã‚¿ãƒ¼å±•ã€‚è¿«åŠ›æº€ç‚¹ã®ãƒã‚¹ã‚¿ãƒ¼ã¨é–¢é€£ã‚°ãƒƒã‚ºã§ä½œå“ã®ä¸–ç•Œè¦³ã‚’å ªèƒ½ã§ãã‚‹é¬¼æ»…ãƒ•ã‚¡ãƒ³å¿…è¦‹ã®ã‚¤ãƒ™ãƒ³ãƒˆã€‚',

  // 7. ã€é«˜å²¡å¸‚ã€‘ãƒ‰ãƒªã‚¢å°‚é–€åº—ã€Œãƒ‰ãƒªã‚¢ãƒªãƒ¼ãƒœã€ã§è¡Œåˆ—å¿…è‡³ã®æ¿ƒåšãƒ‰ãƒªã‚¢ãƒ©ãƒ³ãƒï¼#shorts
  'f5IMbE4BjT3OYPNFYUOuu5': 'é«˜å²¡å¸‚ã®äººæ°—ãƒ‰ãƒªã‚¢å°‚é–€åº—ã€Œãƒ‰ãƒªã‚¢ãƒªãƒ¼ãƒœã€ã§å‘³ã‚ã†çµ¶å“ãƒ©ãƒ³ãƒã€‚å°‚é–€åº—ãªã‚‰ã§ã¯ã®ã“ã ã‚ã‚Šã¨æŠ€è¡“ã§ä½œã‚‰ã‚Œã‚‹æ¿ƒåšãƒ‰ãƒªã‚¢ã¯è¡Œåˆ—å¿…è‡³ã®ç¾å‘³ã—ã•ã€‚åœ°å…ƒæ°‘ã‚‚è¦³å…‰å®¢ã‚‚å¤§æº€è¶³ã€‚',

  // 8. ã€å¯Œå±±å¸‚ã€‘å¯Œå±±ã®å­¦å•ç¥ç¤¾ï¼æ–¼ä¿å¤š(ãŠãŠãŸ)ç¥ç¤¾ã§å¤è©£ï¼†å­¦æ¥­ç¥ˆé¡˜
  'uLkO5gatk1xjPxgoNfP6II': 'å¯Œå±±å¸‚ã®æ–¼ä¿å¤šï¼ˆãŠãŠãŸï¼‰ç¥ç¤¾ã¯å­¦å•ã®ç¥æ§˜ã¨ã—ã¦æœ‰åãªç”±ç·’ã‚ã‚‹ç¥ç¤¾ã€‚å¤è©£ã§ã®å¿ƒèº«ã®æµ„åŒ–ã¨å­¦æ¥­æˆå°±ãƒ»åˆæ ¼ç¥ˆé¡˜ã§ã€å—é¨“ç”Ÿã‹ã‚‰ç¤¾ä¼šäººã¾ã§å¹…åºƒãæ”¯æŒã•ã‚Œã‚‹è–åœ°ã§ã™ã€‚',

  // 9. ã€å¯Œå±±å¸‚ã€‘æ¶¼æ„ŸMAXï¼ç’°æ°´å…¬åœ’ã‚µãƒãƒ¼ãƒ•ã‚¡ã‚¦ãƒ³ãƒ†ãƒ³2025ã§å¤ã®æš‘ã•ã‚’å¹ãé£›ã°ãã†
  'rtuM5GmqOByzZCRYAQl3vv': 'å¯Œå±±å¸‚ã®ç’°æ°´å…¬åœ’ã‚µãƒãƒ¼ãƒ•ã‚¡ã‚¦ãƒ³ãƒ†ãƒ³2025ã§å¤ã®æš‘ã•ã‚’çˆ½å¿«ã«å¹ãé£›ã°ãã†ï¼æ¶¼æ„ŸMAXã®æ°´ã—ã¶ãã¨ç¾ã—ã„æ™¯è¦³ã§ã€æš‘ã„æ—¥ã§ã‚‚å¿«é©ã«éã”ã›ã‚‹äººæ°—ã‚¹ãƒãƒƒãƒˆã§ã™ã€‚',

  // 10. ã€å¯Œå±±å¸‚ã€‘æ±äº¬ãƒ‡ã‚£ã‚ºãƒ‹ãƒ¼ãƒªã‚¾ãƒ¼ãƒˆ40å‘¨å¹´ã‚¹ãƒšã‚·ãƒ£ãƒ«ãƒ‘ãƒ¬ãƒ¼ãƒ‰å®Œå…¨ç‰ˆï½œå¯Œå±±ã¾ã¤ã‚Š2023
  'mfQBFMuZwIktGgzqUTnLwQ': 'å¯Œå±±ã¾ã¤ã‚Š2023ã§é–‹å‚¬ã•ã‚ŒãŸæ±äº¬ãƒ‡ã‚£ã‚ºãƒ‹ãƒ¼ãƒªã‚¾ãƒ¼ãƒˆ40å‘¨å¹´ã‚¹ãƒšã‚·ãƒ£ãƒ«ãƒ‘ãƒ¬ãƒ¼ãƒ‰ã®å®Œå…¨ç‰ˆã€‚ãƒŸãƒƒã‚­ãƒ¼ãŸã¡ãƒ‡ã‚£ã‚ºãƒ‹ãƒ¼ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãŒå¯Œå±±ã®è¡—ã‚’å½©ã£ãŸç‰¹åˆ¥ãªã‚¤ãƒ™ãƒ³ãƒˆã‚’åéŒ²ã€‚'
};

async function updateAllDescriptions() {
  try {
    console.log('ğŸ“ è¨˜äº‹ã®èª¬æ˜æ–‡ã‚’ä¸€æ‹¬æ›´æ–°é–‹å§‹...\n');
    
    let successCount = 0;
    let errorCount = 0;
    const results = [];

    for (const [articleId, description] of Object.entries(descriptionsToUpdate)) {
      try {
        console.log(`ğŸ”„ æ›´æ–°ä¸­: ${articleId}`);
        console.log(`ğŸ“„ èª¬æ˜æ–‡: ${description}\n`);

        // è¨˜äº‹ã®ç¾åœ¨ã®æƒ…å ±ã‚’å–å¾—
        const currentArticle = await client.fetch(`*[_type == "post" && _id == $id][0]{
          _id,
          title,
          description
        }`, { id: articleId });

        if (!currentArticle) {
          console.log(`âŒ è¨˜äº‹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“: ${articleId}\n`);
          errorCount++;
          continue;
        }

        // èª¬æ˜æ–‡ã‚’æ›´æ–°
        await client
          .patch(articleId)
          .set({
            description: description
          })
          .commit();

        console.log(`âœ… æ›´æ–°å®Œäº†: ${currentArticle.title}`);
        console.log(`   æ–‡å­—æ•°: ${description.length}æ–‡å­—`);
        console.log(`   ---\n`);

        results.push({
          id: articleId,
          title: currentArticle.title,
          description: description,
          length: description.length,
          status: 'success'
        });

        successCount++;
        
        // APIè² è·è»½æ¸›ã®ãŸã‚å°‘ã—å¾…æ©Ÿ
        await new Promise(resolve => setTimeout(resolve, 500));
        
      } catch (error) {
        console.error(`âŒ æ›´æ–°ã‚¨ãƒ©ãƒ¼: ${articleId}`);
        console.error(`   ã‚¨ãƒ©ãƒ¼å†…å®¹: ${error.message}\n`);
        
        results.push({
          id: articleId,
          status: 'error',
          error: error.message
        });
        
        errorCount++;
      }
    }

    console.log('\nğŸ‰ ä¸€æ‹¬æ›´æ–°å®Œäº†ï¼');
    console.log(`âœ… æˆåŠŸ: ${successCount}ä»¶`);
    console.log(`âŒ ã‚¨ãƒ©ãƒ¼: ${errorCount}ä»¶`);
    console.log(`ğŸ“Š ç·å‡¦ç†ä»¶æ•°: ${Object.keys(descriptionsToUpdate).length}ä»¶\n`);

    // æˆåŠŸã—ãŸæ›´æ–°ã®è©³ç´°ã‚’è¡¨ç¤º
    if (successCount > 0) {
      console.log('ğŸ“‹ æ›´æ–°ã•ã‚ŒãŸè¨˜äº‹ã®è©³ç´°:');
      results.filter(r => r.status === 'success').forEach((result, index) => {
        console.log(`${index + 1}. ${result.title}`);
        console.log(`   èª¬æ˜æ–‡: ${result.description}`);
        console.log(`   æ–‡å­—æ•°: ${result.length}æ–‡å­—`);
        console.log('   ---');
      });
    }

    // ã‚¨ãƒ©ãƒ¼ãŒã‚ã£ãŸå ´åˆã®è©³ç´°ã‚’è¡¨ç¤º
    if (errorCount > 0) {
      console.log('\nâŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸè¨˜äº‹:');
      results.filter(r => r.status === 'error').forEach((result, index) => {
        console.log(`${index + 1}. ID: ${result.id}`);
        console.log(`   ã‚¨ãƒ©ãƒ¼: ${result.error}`);
        console.log('   ---');
      });
    }

    return results;

  } catch (error) {
    console.error('âŒ å‡¦ç†ä¸­ã«äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ:', error.message);
    return [];
  }
}

// å®Ÿè¡Œ
updateAllDescriptions();