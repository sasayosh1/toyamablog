---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const allPosts = await getCollection('blog');
const recentPosts = allPosts
  .sort((a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime())
  .slice(0, 3);
---

<BaseLayout title="TOYAMA BLOG" description="富山をテーマにした個人ブログサイト">
  <!-- ヒーローセクション - 海と山の風景 -->
  <section style="
    position: relative; 
    height: 70vh; 
    background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), 
    url('https://images.unsplash.com/photo-1626736483835-cbd9a4d5a293?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80') center/cover;
    display: flex; 
    align-items: center; 
    justify-content: center; 
    margin-bottom: 4rem;
  ">
    <div style="text-align: center; color: white; z-index: 1;">
      <h1 style="font-size: 4rem; margin-bottom: 1rem; text-shadow: 2px 2px 4px rgba(0,0,0,0.7);">
        TOYAMA BLOG
      </h1>
      <p style="font-size: 1.5rem; max-width: 600px; margin: 0 auto; text-shadow: 1px 1px 2px rgba(0,0,0,0.7);">
        富山の魅力や日々の思いを綴る個人ブログです。<br>
        地域の文化、観光地、グルメなどの情報をお届けします。
      </p>
    </div>
  </section>

  <!-- 富山の風景ギャラリー -->
  <section style="margin-bottom: 4rem;">
    <h2 style="font-size: 2rem; margin-bottom: 2rem; text-align: center;">富山の美しい風景</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem; margin-bottom: 3rem;">
      <div style="border-radius: 0.5rem; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
        <img 
          src="https://plus.unsplash.com/premium_photo-1668456011159-89ec35e65325?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" 
          alt="富山湾と立山連峰"
          style="width: 100%; height: 200px; object-fit: cover;"
        />
        <div style="padding: 1rem; background: white;">
          <h3 style="margin: 0 0 0.5rem 0; font-size: 1.1rem;">富山湾と立山連峰</h3>
          <p style="margin: 0; color: #666; font-size: 0.9rem;">海と山が織りなす絶景</p>
        </div>
      </div>
      <div style="border-radius: 0.5rem; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
        <img 
          src="https://images.unsplash.com/photo-1631951530762-8c107de62571?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" 
          alt="雪化粧した山と海"
          style="width: 100%; height: 200px; object-fit: cover;"
        />
        <div style="padding: 1rem; background: white;">
          <h3 style="margin: 0 0 0.5rem 0; font-size: 1.1rem;">冬の富山</h3>
          <p style="margin: 0; color: #666; font-size: 0.9rem;">雪化粧した山々と日本海</p>
        </div>
      </div>
    </div>
  </section>

  <section style="margin-bottom: 4rem;">
    <h2 style="font-size: 2rem; margin-bottom: 2rem; text-align: center;">最新の記事</h2>
    
    {recentPosts.length > 0 ? (
      <div style="display: grid; gap: 2rem; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));">
        {recentPosts.map((post) => (
          <article style="background: #f8f9fa; padding: 1.5rem; border-radius: 0.5rem; border: 1px solid #e9ecef;">
            <h3 style="margin-bottom: 0.5rem;">
              <a href={`/blog/${post.slug}/`} style="text-decoration: none; color: #333;">
                {post.data.title}
              </a>
            </h3>
            <time style="color: #666; font-size: 0.875rem;">
              {post.data.pubDate.toLocaleDateString('ja-JP')}
            </time>
            <p style="margin-top: 1rem; color: #666;">
              {post.data.description}
            </p>
          </article>
        ))}
      </div>
    ) : (
      <p style="text-align: center; color: #666;">
        まだ記事がありません。近日中に投稿予定です。
      </p>
    )}
    
    <div style="text-align: center; margin-top: 2rem;">
      <a 
        href="/blog/" 
        style="display: inline-block; background: #333; color: white; padding: 0.75rem 1.5rem; text-decoration: none; border-radius: 0.375rem; font-weight: 500;"
      >
        すべての記事を見る
      </a>
    </div>
  </section>

  <section style="background: #f8f9fa; padding: 3rem; border-radius: 0.5rem; text-align: center;">
    <h2 style="font-size: 2rem; margin-bottom: 1rem;">プロフィール</h2>
    <p style="color: #666; max-width: 500px; margin: 0 auto;">
      富山在住のブロガーです。地元の魅力を発信しながら、<br>
      日々の出来事や思いを記録しています。
    </p>
    <div style="margin-top: 1.5rem;">
      <a 
        href="/about/" 
        style="display: inline-block; background: transparent; color: #333; padding: 0.75rem 1.5rem; text-decoration: none; border: 2px solid #333; border-radius: 0.375rem; font-weight: 500;"
      >
        詳しいプロフィール
      </a>
    </div>
  </section>
</BaseLayout>