---
import BaseLayout from './BaseLayout.astro';
import type { CollectionEntry } from 'astro:content';

export interface Props {
  post: CollectionEntry<'blog'>;
}

const { post } = Astro.props;
const { title, description, pubDate, updatedDate, heroImage } = post.data;

const formattedDate = pubDate.toLocaleDateString('ja-JP', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});

const formattedUpdatedDate = updatedDate?.toLocaleDateString('ja-JP', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});
---

<BaseLayout title={title} description={description}>
  <article class="prose">
    <header style="margin-bottom: 2rem;">
      {heroImage && (
        <img 
          src={heroImage} 
          alt={title}
          style="width: 100%; height: 300px; object-fit: cover; border-radius: 0.5rem; margin-bottom: 1rem;"
        />
      )}
      <h1>{title}</h1>
      <div style="color: #666; margin-bottom: 1rem;">
        <time datetime={pubDate.toISOString()}>
          {formattedDate}
        </time>
        {formattedUpdatedDate && (
          <span> (更新: {formattedUpdatedDate})</span>
        )}
      </div>
      {description && (
        <p style="font-size: 1.125rem; color: #666; font-style: italic;">
          {description}
        </p>
      )}
    </header>
    
    <slot />
    
    <footer style="margin-top: 3rem; padding-top: 2rem; border-top: 1px solid #e9ecef;">
      <a href="/blog/" style="color: #666; text-decoration: none;">
        ← ブログ一覧に戻る
      </a>
    </footer>
  </article>
</BaseLayout>