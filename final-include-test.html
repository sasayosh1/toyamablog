<!DOCTYPE html>
<html>
<head>
    <title>ğŸ‰ Sanity Dashboard Include - æœ€çµ‚ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .container { 
            max-width: 1200px; 
            margin: 0 auto; 
            background: rgba(255,255,255,0.1); 
            padding: 30px; 
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        .test-section { 
            margin: 30px 0; 
            padding: 20px; 
            background: rgba(255,255,255,0.2); 
            border-radius: 10px; 
        }
        iframe { 
            width: 100%; 
            height: 700px; 
            border: 3px solid #4CAF50; 
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }
        .status { 
            padding: 15px; 
            margin: 10px 0; 
            border-radius: 8px; 
            font-weight: bold;
        }
        .success { 
            background: rgba(76, 175, 80, 0.8); 
            border: 2px solid #4CAF50; 
        }
        .info { 
            background: rgba(33, 150, 243, 0.8); 
            border: 2px solid #2196F3; 
        }
        .header { text-align: center; margin-bottom: 30px; }
        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .feature-item {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ‰ Sanity Dashboard Includeè¨­å®š</h1>
            <h2>å®Œå…¨å‹•ä½œç¢ºèªãƒ†ã‚¹ãƒˆ</h2>
        </div>

        <div class="feature-list">
            <div class="feature-item">
                <h3>âœ… CORSè¨­å®š</h3>
                <p>â€¢ https://sanity.io<br>
                â€¢ https://aoxze287.sanity.studio</p>
            </div>
            <div class="feature-item">
                <h3>âœ… iframeè¨±å¯</h3>
                <p>â€¢ X-Frame-Options: é™¤å¤–æ¸ˆã¿<br>
                â€¢ CSP frame-ancestors: è¨­å®šæ¸ˆã¿</p>
            </div>
            <div class="feature-item">
                <h3>âœ… èªè¨¼å¯¾å¿œ</h3>
                <p>â€¢ credentials: true<br>
                â€¢ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç¶­æŒ</p>
            </div>
            <div class="feature-item">
                <h3>ğŸš€ Includeæ©Ÿèƒ½</h3>
                <p>â€¢ DashboardåŸ‹ã‚è¾¼ã¿å¯¾å¿œ<br>
                â€¢ å¤–éƒ¨ã‚µã‚¤ãƒˆå¯¾å¿œ</p>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ”§ Studio åŸ‹ã‚è¾¼ã¿ãƒ†ã‚¹ãƒˆ</h2>
            <div id="embedStatus" class="status info">
                ğŸ“¡ Studio ã‚’èª­ã¿è¾¼ã¿ä¸­...
            </div>
            
            <iframe 
                id="studioFrame" 
                src="https://sasakiyoshimasa.com/studio" 
                title="Sanity Studio - Dashboard Include Test"
                allowfullscreen>
            </iframe>
        </div>

        <div class="test-section">
            <h2>ğŸ“‹ ãƒ†ã‚¹ãƒˆçµæœ</h2>
            <div id="testResults">
                <div class="status info">ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...</div>
            </div>
        </div>
    </div>

    <script>
        const iframe = document.getElementById('studioFrame');
        const embedStatus = document.getElementById('embedStatus');
        const testResults = document.getElementById('testResults');
        
        let testsPassed = 0;
        const totalTests = 3;
        
        // ãƒ†ã‚¹ãƒˆ1: iframeèª­ã¿è¾¼ã¿
        iframe.onload = function() {
            testsPassed++;
            embedStatus.className = 'status success';
            embedStatus.innerHTML = 'âœ… SUCCESS: Studio ãŒæ­£å¸¸ã«åŸ‹ã‚è¾¼ã¾ã‚Œã¾ã—ãŸï¼';
            updateTestResults();
        };
        
        iframe.onerror = function() {
            embedStatus.className = 'status error';
            embedStatus.innerHTML = 'âŒ ERROR: Studio ã®åŸ‹ã‚è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ';
            updateTestResults();
        };
        
        // ãƒ†ã‚¹ãƒˆ2: ãƒ˜ãƒƒãƒ€ãƒ¼ç¢ºèª
        fetch('https://sasakiyoshimasa.com/studio', { method: 'HEAD' })
        .then(response => {
            testsPassed++;
            console.log('âœ… Header test passed');
            updateTestResults();
        })
        .catch(error => {
            console.log('âŒ Header test failed:', error);
            updateTestResults();
        });
        
        // ãƒ†ã‚¹ãƒˆ3: ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆä¿è­·
        setTimeout(() => {
            if (embedStatus.innerHTML.includes('èª­ã¿è¾¼ã¿ä¸­')) {
                testsPassed++;
                embedStatus.className = 'status success';
                embedStatus.innerHTML = 'âœ… Studio èª­ã¿è¾¼ã¿å®Œäº†ï¼ˆIncludeè¨­å®šæœ‰åŠ¹ï¼‰';
            }
            updateTestResults();
        }, 8000);
        
        function updateTestResults() {
            const percentage = Math.round((testsPassed / totalTests) * 100);
            
            if (testsPassed === totalTests) {
                testResults.innerHTML = `
                    <div class="status success">
                        ğŸ‰ å…¨ãƒ†ã‚¹ãƒˆå®Œäº† (${testsPassed}/${totalTests})
                        <br><br>
                        <strong>Sanity Dashboard Includeè¨­å®šãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã™ï¼</strong>
                        <br><br>
                        Dashboard ã‹ã‚‰ Studio ã‚’å•é¡ŒãªãåŸ‹ã‚è¾¼ã‚ã¾ã™ã€‚
                    </div>
                `;
            } else {
                testResults.innerHTML = `
                    <div class="status info">
                        ãƒ†ã‚¹ãƒˆé€²è¡Œä¸­... ${testsPassed}/${totalTests} (${percentage}%)
                    </div>
                `;
            }
        }
        
        // åˆæœŸè¡¨ç¤º
        updateTestResults();
    </script>
</body>
</html>